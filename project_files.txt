.
├── .env
├── eslint.config.js
├── get-all
├── get-database
├── .gitignore
├── index.html
├── package.json
├── package-lock.json
├── project_files.txt
├── public
├── README.md
├── src
│   ├── App.css
│   ├── App.tsx
│   ├── assets
│   ├── components
│   │   ├── layout
│   │   │   ├── MainLayout.tsx
│   │   │   ├── Navbar.tsx
│   │   │   └── Sidebar.tsx
│   │   ├── tools
│   │   │   └── UnitConversionManager.tsx
│   │   └── ui
│   │       ├── Badge.tsx
│   │       ├── Button.tsx
│   │       ├── Card.tsx
│   │       ├── FormComponents.tsx
│   │       ├── Input.tsx
│   │       ├── Loading.tsx
│   │       ├── Pagination.tsx
│   │       └── Table.tsx
│   ├── hooks
│   │   ├── useAddItemForm.ts
│   │   └── useUnitConversion.ts
│   ├── index.css
│   ├── lib
│   │   ├── classNames.ts
│   │   └── supabase.ts
│   ├── main.tsx
│   ├── output.css
│   ├── pages
│   │   ├── auth
│   │   │   └── Login.tsx
│   │   ├── dashboard
│   │   │   └── Dashboard.tsx
│   │   ├── master-data
│   │   │   ├── AddItem.tsx
│   │   │   ├── CategoryList.tsx
│   │   │   ├── ItemList.tsx
│   │   │   ├── TypeList.tsx
│   │   │   └── UnitList.tsx
│   │   └── sales
│   │       └── CreateSale.tsx
│   ├── store
│   │   └── authStore.ts
│   └── vite-env.d.ts
├── supabase_data
│   ├── database_export.txt
│   ├── definitions.txt
│   ├── doctors.json
│   ├── item_categories.json
│   ├── items.json
│   ├── item_types.json
│   ├── item_units.json
│   ├── patients.json
│   ├── purchase_items.json
│   ├── purchases.json
│   ├── sale_items.json
│   ├── sales.json
│   ├── suppliers.json
│   ├── unit_conversions.json
│   └── users.json
├── tailwind.config.js
├── tsconfig.app.json
├── tsconfig.json
├── tsconfig.node.json
└── vite.config.ts

17 directories, 61 files


===============================================
= File: ./project_files.txt 
===============================================



===============================================
= File: ./tsconfig.app.json 
===============================================

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}


===============================================
= File: ./tsconfig.json 
===============================================

{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}


===============================================
= File: ./README.md 
===============================================

# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/README.md) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config({
  extends: [
    // Remove ...tseslint.configs.recommended and replace with this
    ...tseslint.configs.recommendedTypeChecked,
    // Alternatively, use this for stricter rules
    ...tseslint.configs.strictTypeChecked,
    // Optionally, add this for stylistic rules
    ...tseslint.configs.stylisticTypeChecked,
  ],
  languageOptions: {
    // other options...
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
})
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default tseslint.config({
  plugins: {
    // Add the react-x and react-dom plugins
    'react-x': reactX,
    'react-dom': reactDom,
  },
  rules: {
    // other rules...
    // Enable its recommended typescript rules
    ...reactX.configs['recommended-typescript'].rules,
    ...reactDom.configs.recommended.rules,
  },
})
```


===============================================
= File: ./package.json 
===============================================

{
  "name": "apotek-klinik-app",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@google/genai": "^0.7.0",
    "@headlessui/react": "^2.2.0",
    "@supabase/supabase-js": "^2.49.3",
    "@tanstack/react-table": "^8.21.2",
    "autoprefixer": "^10.4.21",
    "axios": "^1.8.4",
    "chart.js": "^4.4.8",
    "html2canvas": "^1.4.1",
    "jspdf": "^3.0.1",
    "postcss": "^8.5.3",
    "react": "^19.0.0",
    "react-chartjs-2": "^5.3.0",
    "react-dom": "^19.0.0",
    "react-icons": "^5.5.0",
    "react-router-dom": "^6.30.0",
    "zustand": "^5.0.3"
  },
  "devDependencies": {
    "@eslint/js": "^9.21.0",
    "@types/react": "^19.0.10",
    "@types/react-dom": "^19.0.4",
    "@vitejs/plugin-react": "^4.3.4",
    "eslint": "^9.21.0",
    "eslint-plugin-react-hooks": "^5.1.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^15.15.0",
    "tailwindcss": "^3.4.17",
    "typescript": "~5.7.2",
    "typescript-eslint": "^8.24.1",
    "vite": "^6.2.0"
  }
}


===============================================
= File: ./tailwind.config.js 
===============================================

/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: [
          'system-ui',
          'Avenir',
          'Helvetica',
          'Arial',
          'sans-serif',
        ],
      },
      colors: {
        primary: "#1a73e8",
        secondary: "#4285f4",
        accent: "#ea4335",
        neutral: "#fbbc05",
      },
    },
  },
  plugins: [],
}

===============================================
= File: ./src/main.tsx 
===============================================

import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)


===============================================
= File: ./src/App.css 
===============================================

#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}


===============================================
= File: ./src/components/ui/Pagination.tsx 
===============================================

// src/components/ui/Pagination.tsx
import { classNames } from "../../lib/classNames";
import { Button } from "./Button";

export interface PaginationProps {
    currentPage: number;
    totalPages: number;
    totalItems: number;
    itemsPerPage: number;
    itemsCount: number;
    onPageChange: (page: number) => void;
    onItemsPerPageChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;
    className?: string;
}

export const Pagination = ({
    currentPage,
    totalPages,
    // totalItems,
    itemsPerPage,
    // itemsCount,
    onPageChange,
    onItemsPerPageChange,
    className,
}: PaginationProps) => {
    // const pageNumbers = [];
    // Sudah tidak memerlukan pageNumbers untuk tampilan semua halaman

    // Fungsi untuk menangani perubahan jumlah item per halaman
    const handleItemsPerPageClick = (value: number) => {
        const event = {
            target: { value: value.toString() }
        } as React.ChangeEvent<HTMLSelectElement>;
        onItemsPerPageChange(event);
    };

    return (
        <div className={classNames("flex justify-between items-center mt-4 gap-4", className)}>
            {/* Items per page selection - left side */}
            <div className="flex items-center rounded-full bg-primary shadow-md text-white overflow-hidden">
                <button 
                    className={classNames(
                        "px-3 py-1.5 focus:outline-none transition-colors", 
                        itemsPerPage === 10 ? "bg-blue-600" : "hover:bg-blue-600"
                    )}
                    onClick={() => handleItemsPerPageClick(10)}
                >
                    10 Items
                </button>
                <button 
                    className={classNames(
                        "px-3 py-1.5 focus:outline-none transition-colors", 
                        itemsPerPage === 20 ? "bg-blue-600" : "hover:bg-blue-600"
                    )}
                    onClick={() => handleItemsPerPageClick(20)}
                >
                    20
                </button>
                <button 
                    className={classNames(
                        "px-3 py-1.5 focus:outline-none transition-colors", 
                        itemsPerPage === 40 ? "bg-blue-600" : "hover:bg-blue-600"
                    )}
                    onClick={() => handleItemsPerPageClick(40)}
                >
                    40
                </button>
            </div>

            {/* Page navigation - right side */}
            <div className="flex items-center rounded-full bg-primary shadow-md text-white overflow-hidden">
                <Button
                    variant="text"
                    size="sm"
                    onClick={() => onPageChange(currentPage - 1)}
                    disabled={currentPage === 1}
                    className="px-3 py-1.5 text-white hover:bg-blue-600 focus:ring-0 focus:outline-none"
                >
                    &lt;
                </Button>

                <div className="px-3 py-1.5">
                    {currentPage} of {totalPages}
                </div>

                <Button
                    variant="text"
                    size="sm"
                    onClick={() => onPageChange(currentPage + 1)}
                    disabled={currentPage === totalPages || totalPages === 0}
                    className="px-3 py-1.5 text-white hover:bg-blue-600 focus:ring-0 focus:outline-none"
                >
                    &gt;
                </Button>
            </div>
        </div>
    );
};

===============================================
= File: ./src/components/ui/Button.tsx 
===============================================

// src/components/ui/Button.tsx
import { classNames } from "../../lib/classNames";

export type ButtonVariant =
    | "primary"
    | "secondary"
    | "accent"
    | "outline"
    | "text"
    | "danger";
export type ButtonSize = "sm" | "md" | "lg";

export interface ButtonProps
    extends React.ButtonHTMLAttributes<HTMLButtonElement> {
    variant?: ButtonVariant;
    size?: ButtonSize;
    isLoading?: boolean;
    fullWidth?: boolean;
}

export const Button = ({
    children,
    className,
    variant = "primary",
    size = "md",
    isLoading = false,
    fullWidth = false,
    ...props
}: ButtonProps) => {
    const variants = {
        primary: "rounded-md shadow-md bg-blue-500 flex items-center hover:bg-blue-600 text-white hover:text-white",
        secondary: "rounded-md bg-blue-600 bg-secondary hover:bg-blue-700 text-white hover:text-white",
        accent: "bg-accent hover:bg-red-600 text-white",
        outline: "border border-primary text-primary hover:bg-blue-50",
        text: "bg-transparent hover:bg-opacity-10 focus:outline-none focus:ring-0 focus:shadow-none",
        danger: "bg-red-600 hover:bg-red-700 text-white",
    };

    const sizes = {
        sm: "px-3 py-1.5 text-sm",
        md: "px-4 py-2",
        lg: "px-6 py-3 text-lg",
    };

    const baseClasses = "font-medium rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed";
    const focusClasses = variant === 'text' ? "" : "focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary";
    
    return (
        <button
            className={classNames(
                baseClasses, focusClasses,
                variants[variant],
                sizes[size],
                fullWidth ? "w-full" : "",
                className
            )}
            disabled={isLoading || props.disabled}
            {...props}
        >
            {isLoading ? (
                <span className="flex items-center justify-center">
                    <svg
                        className="animate-spin -ml-1 mr-2 h-4 w-4 text-current"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                    >
                        <circle
                            className="opacity-25"
                            cx="12"
                            cy="12"
                            r="10"
                            stroke="currentColor"
                            strokeWidth="4"
                        ></circle>
                        <path
                            className="opacity-75"
                            fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                        ></path>
                    </svg>
                    Loading...
                </span>
            ) : (
                children
            )}
        </button>
    );
};


===============================================
= File: ./src/components/ui/Card.tsx 
===============================================

// src/components/ui/Card.tsx
import { classNames } from '../../lib/classNames';

interface CardProps {
    children: React.ReactNode;
    className?: string;
}

export const Card = ({ children, className }: CardProps) => {
    return (
        <div className={classNames('bg-white p-6 rounded-lg shadow', className)}>
            {children}
        </div>
    );
};

export const CardHeader = ({ children, className }: CardProps) => {
    return (
        <div className={classNames('mb-4', className)}>
            {children}
        </div>
    );
};

export const CardTitle = ({ children, className }: CardProps) => {
    return (
        <h2 className={classNames('text-2xl font-semibold text-gray-800', className)}>
            {children}
        </h2>
    );
};

export const CardContent = ({ children, className }: CardProps) => {
    return (
        <div className={classNames('', className)}>
            {children}
        </div>
    );
};

export const CardFooter = ({ children, className }: CardProps) => {
    return (
        <div className={classNames('mt-4 pt-4 border-t', className)}>
            {children}
        </div>
    );
};

===============================================
= File: ./src/components/ui/Table.tsx 
===============================================

// src/components/ui/Table.tsx
import { classNames } from '../../lib/classNames';

interface TableProps {
    children: React.ReactNode;
    className?: string;
}

interface TableCellProps extends TableProps {
    colSpan?: number;
    rowSpan?: number;
    align?: 'left' | 'center' | 'right';
}

export const Table = ({ children, className }: TableProps) => {
    return (
        <div className={classNames('overflow-x-auto rounded-lg shadow', className)}>
            <table className="min-w-full bg-white rounded-lg overflow-hidden">
                {children}
            </table>
        </div>
    );
};

export const TableHead = ({ children, className }: TableProps) => {
    return (
        <thead className={classNames('bg-gray-50 text-gray-700 border-b border-gray-200', className)}>
            {children}
        </thead>
    );
};

export const TableBody = ({ children, className }: TableProps) => {
    return (
        <tbody className={classNames('divide-y divide-gray-100 bg-white', className)}>
            {children}
        </tbody>
    );
};

export const TableRow = ({ children, className }: TableProps) => {
    return (
        <tr className={classNames('transition-colors duration-150 hover:bg-gray-100 even:bg-gray-50/30', className)}>
            {children}
        </tr>
    );
};

export const TableCell = ({ children, className }: TableCellProps) => {
    return (
        <td className={classNames('py-3 px-4 text-gray-700 align-middle', className)}>
            {children}
        </td>
    );
};

export const TableHeader = ({ children, className }: TableProps) => {
    return (
        <th className={classNames('py-3 px-4 text-left bg-gray-200 text-gray-700 uppercase tracking-wider text-sm', className)}>
            {children}
        </th>
    );
};

===============================================
= File: ./src/components/ui/Input.tsx 
===============================================

// src/components/ui/Input.tsx
import { classNames } from '../../lib/classNames';

export interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
    label?: string;
    error?: string;
    fullWidth?: boolean;
}

export const Input = ({
    label,
    error,
    className,
    fullWidth = true,
    ...props
}: InputProps) => {
    return (
        <div className={fullWidth ? 'w-full' : ''}>
            {label && (
                <label className="block text-gray-700 mb-2" htmlFor={props.id}>
                    {label}
                </label>
            )}
            <input
                className={classNames(
                    'p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent',
                    error ? 'border-red-500' : 'border-gray-300',
                    fullWidth ? 'w-full' : '',
                    className
                )}
                {...props}
            />
            {error && <p className="mt-1 text-sm text-red-600">{error}</p>}
        </div>
    );
};

===============================================
= File: ./src/components/ui/Badge.tsx 
===============================================

// src/components/ui/Badge.tsx
import { classNames } from "../../lib/classNames";

export type BadgeVariant =
    | "primary"
    | "secondary"
    | "accent"
    | "success"
    | "warning"
    | "danger";

interface BadgeProps {
    children: React.ReactNode;
    variant?: BadgeVariant;
    className?: string;
}

export const Badge = ({
    children,
    variant = "primary",
    className,
}: BadgeProps) => {
    const variants = {
        primary: "bg-blue-100 text-blue-800",
        secondary: "bg-gray-100 text-gray-800",
        accent: "bg-red-100 text-red-800",
        success: "bg-green-100 text-green-800",
        warning: "bg-yellow-100 text-yellow-800",
        danger: "bg-red-100 text-red-800",
    };

    return (
        <span
            className={classNames(
                "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",
                variants[variant],
                className
            )}
        >
            {children}
        </span>
    );
};


===============================================
= File: ./src/components/ui/FormComponents.tsx 
===============================================

// src/components/ui/FormComponents.tsx
import { classNames } from "../../lib/classNames";

// FormSection component
interface FormSectionProps {
    title: string;
    children: React.ReactNode;
    className?: string;
}

export const FormSection: React.FC<FormSectionProps> = ({ title, children, className }) => {
    return (
        <div className={classNames("border border-gray-200 rounded-lg mb-6", className)}>
            <h2 className="text-lg font-semibold bg-gray-100 p-3 border-b">
                {title}
            </h2>
            <div className="p-4 space-y-4">
                {children}
            </div>
        </div>
    );
};

// FormField component
interface FormFieldProps {
    label: string;
    children: React.ReactNode;
    className?: string;
}

export const FormField: React.FC<FormFieldProps> = ({ label, children, className }) => {
    return (
        <div className={className}>
            <label className="block text-sm font-medium text-gray-700 mb-1">
                {label}
            </label>
            {children}
        </div>
    );
};

===============================================
= File: ./src/components/ui/Loading.tsx 
===============================================

import { classNames } from "../../lib/classNames";

interface LoadingProps {
    className?: string;
    message?: string;
}

export const Loading = ({ className, message = "Memuat data..." }: LoadingProps) => (
    <div className={classNames("text-center py-10", className)}>
        <div className="inline-block animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent"></div>
        <p className="mt-2 text-gray-600">{message}</p>
    </div>
);


===============================================
= File: ./src/components/tools/UnitConversionManager.tsx 
===============================================

import { useEffect } from "react";
import { Input } from "../ui/Input";
import { Button } from "../ui/Button";
import { Table, TableHead, TableBody, TableRow, TableCell, TableHeader } from "../ui/Table";
import { FormSection, FormField } from "../ui/FormComponents";
import { UseUnitConversionReturn } from "../../hooks/useUnitConversion";
import { FaTrash } from "react-icons/fa";

interface UnitConversionManagerProps {
    unitConversionHook: UseUnitConversionReturn;
}

const UnitConversionManager: React.FC<UnitConversionManagerProps> = ({
    unitConversionHook
}) => {
    const {
        baseUnit,
        // setBaseUnit,
        basePrice,
        // setBasePrice,
        unitConversions,
        addUnitConversion,
        removeUnitConversion,
        unitConversionFormData,
        setUnitConversionFormData,
        recalculateBasePrices,
        availableUnits
    } = unitConversionHook;

    // Recalculate base prices when base price changes
    useEffect(() => {
        if (basePrice > 0 && unitConversions.length > 0) {
            recalculateBasePrices();
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [basePrice, recalculateBasePrices]);

    // const handleBaseUnitChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
    //     const { name, value } = e.target;
    //     if (name === "baseUnit") {
    //         setBaseUnit(value);
    //     } else if (name === "basePrice") {
    //         setBasePrice(parseFloat(value) || 0);
    //     }
    // };

    // Handler untuk form konversi satuan
    const handleConversionFormChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
        const { name, value } = e.target;
        setUnitConversionFormData({
            ...unitConversionFormData,
            [name]: name === "conversion" ? parseFloat(value) || 0 : value,
        });
    };

    // Tambahkan konversi baru
    const handleAddConversion = () => {
        if (!unitConversionFormData.unit || unitConversionFormData.conversion <= 0) {
            alert("Satuan dan konversi harus diisi dengan benar!");
            return;
        }

        // Cek apakah satuan sudah ada
        const existingUnit = unitConversions.find(uc => uc.unit.name === unitConversionFormData.unit);
        if (existingUnit) {
            alert("Satuan tersebut sudah ada dalam daftar!");
            return;
        }
        
        const selectedUnit = availableUnits.find(u => u.name === unitConversionFormData.unit);
            if (!selectedUnit) {
                alert("Satuan tidak valid!");
            return;
        }

        addUnitConversion({
            unit: selectedUnit,
            conversion: unitConversionFormData.conversion,
        });

        // Reset form
        setUnitConversionFormData({
            unit: "",
            conversion: 0,
        });
    };

    return (
        <FormSection title="Satuan dan Konversi">
            <div>
                <h3 className="text-lg font-medium mb-3">Konversi Satuan</h3>
                <p className="text-sm text-gray-600 mb-3">
                    Tentukan berapa banyak satuan turunan dalam satu satuan dasar.
                </p>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <FormField label="Satuan Konversi">
                        <select
                            name="unit"
                            value={unitConversionFormData.unit}
                            onChange={handleConversionFormChange}
                            className="w-full p-3 border rounded-md"
                        >
                            <option value="">-- Pilih Satuan --</option>
                            {availableUnits
                                .filter(unit => unit.name !== baseUnit)
                                .filter(unit => !unitConversions.some(uc => uc.unit.name === unit.name))
                                .map(unit => (
                                <option key={unit.id} value={unit.name}>
                                    {unit.name}
                                </option>
                            ))}
                        </select>
                    </FormField>

                    <FormField label={`1 ${baseUnit || 'satuan dasar'} = ? ${unitConversionFormData.unit || 'satuan'}`}>
                        <div className="flex space-x-2">
                            <Input
                                name="conversion"
                                value={unitConversionFormData.conversion || ""}
                                onChange={handleConversionFormChange}
                                type="number"
                                min="1"
                                placeholder="Jumlah satuan dasar"
                                className="w-full"
                            />
                            <Button
                                type="button"
                                onClick={handleAddConversion}
                                className="whitespace-nowrap"
                            >
                                Tambah Satuan
                            </Button>
                        </div>
                    </FormField>
                </div>

                <div className="border rounded-lg overflow-hidden">
                    <Table>
                        <TableHead>
                            <TableRow>
                                <TableHeader>Satuan Turunan</TableHeader>
                                <TableHeader>Konversi</TableHeader>
                                <TableHeader>Harga Pokok</TableHeader>
                                <TableHeader className="text-center">Aksi</TableHeader>
                            </TableRow>
                        </TableHead>
                        <TableBody>
                            {unitConversions.length === 0 ? (
                                <TableRow>
                                    <TableCell colSpan={4} className="text-center text-gray-500">
                                        Belum ada data konversi
                                    </TableCell>
                                </TableRow>
                            ) : (
                                unitConversions.map((uc) => (
                                    <TableRow key={uc.id}>
                                        <TableCell>{uc.unit.name}</TableCell>
                                        <TableCell>
                                            1 {baseUnit} = {uc.conversion} {uc.unit.name}
                                        </TableCell>
                                        <TableCell>
                                            {(uc.basePrice || 0).toLocaleString("id-ID", {
                                                style: "currency",
                                                currency: "IDR",
                                            })}
                                        </TableCell>
                                        <TableCell className="text-center">
                                            <Button
                                                variant="danger"
                                                size="sm"
                                                onClick={() => removeUnitConversion(uc.id)}
                                            >
                                                <FaTrash />
                                            </Button>
                                        </TableCell>
                                    </TableRow>
                                ))
                            )}
                        </TableBody>
                    </Table>
                </div>

                <div className="mt-4 text-sm text-gray-600">
                    <ul className="list-disc pl-5 space-y-1">
                        <li>Harga pokok satuan turunan dihitung dengan: Harga pokok satuan dasar ÷ jumlah satuan turunan.</li>
                        <li className="text-red-500 font-semibold">PENTING: Disarankan untuk tidak mengubah satuan jika sudah terdapat transaksi yang berhubungan dengan item ini.</li>
                    </ul>
                </div>
            </div>
        </FormSection>
    );
};

export default UnitConversionManager;

===============================================
= File: ./src/components/layout/MainLayout.tsx 
===============================================

import { Outlet } from "react-router-dom";
import Navbar from "./Navbar";
import Sidebar from "./Sidebar";

const MainLayout = () => {
    return (
        <div className="flex h-screen bg-gray-100 text-gray-800">
            <Sidebar />

            <div className="flex flex-col flex-1 overflow-hidden">
                <Navbar />

                <main className="flex-1 overflow-y-auto p-4 text-gray-800">
                    <Outlet />
                </main>
            </div>
        </div>
    );
};

export default MainLayout;


===============================================
= File: ./src/components/layout/Navbar.tsx 
===============================================

// src/components/layout/Navbar.tsx
import { useState } from 'react';
import { useAuthStore } from '../../store/authStore';
import { Button } from '../ui/Button';

const Navbar = () => {
    const { user, logout } = useAuthStore();
    const [dropdownOpen, setDropdownOpen] = useState(false);

    const toggleDropdown = () => {
        setDropdownOpen(!dropdownOpen);
    };

    const handleLogout = async () => {
        await logout();
    };

    return (
        <nav className="bg-white border-b px-6 py-3">
            <div className="flex justify-between items-center">
                <div>
                    <h1 className="text-xl font-semibold text-gray-800">PharmaSys</h1>
                </div>

                <div className="relative">
                    <button
                        className="flex items-center space-x-2"
                        onClick={toggleDropdown}
                    >
                        <div className="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center">
                            {user?.name ? user.name.charAt(0).toUpperCase() : 'U'}
                        </div>
                        <span className="font-medium">{user?.name || 'User'}</span>
                    </button>

                    {dropdownOpen && (
                        <div className="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10">
                            <div className="py-1">
                                <Button
                                    variant="outline"
                                    className="w-full justify-start rounded-none"
                                    onClick={handleLogout}
                                >
                                    Logout
                                </Button>
                            </div>
                        </div>
                    )}
                </div>
            </div>
        </nav>
    );
};

export default Navbar;

===============================================
= File: ./src/components/layout/Sidebar.tsx 
===============================================

import { Link } from "react-router-dom";
import { useState } from "react";
import {
    FaDatabase,
    FaBoxes,
    FaShoppingCart,
    FaShoppingBag,
    FaHospital,
    FaChartBar,
    FaCog,
    FaAngleDown,
} from "react-icons/fa";

const Sidebar = () => {
    const [openMenus, setOpenMenus] = useState<Record<string, boolean>>({
        masterData: false,
        inventory: false,
        purchasing: false,
        sales: false,
        clinic: false,
        accounting: false,
        reports: false,
        settings: false,
    });

    const toggleMenu = (menu: string) => {
        setOpenMenus((prev) => ({
            ...prev,
            [menu]: !prev[menu],
        }));
    };

    return (
        <aside className="w-64 bg-white shadow-md">
            <div className="p-4 bg-primary text-white">
                <h2 className="text-xl font-bold">Apotek App</h2>
            </div>

            <nav className="mt-6">
                <Link
                    to="/"
                    className="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100"
                >
                    <span className="mx-3">Dashboard</span>
                </Link>

                {/* Master Data */}
                <div>
                    <button
                        onClick={() => toggleMenu("masterData")}
                        className="flex items-center justify-between w-full px-6 py-3 text-gray-700 hover:bg-gray-100"
                    >
                        <div className="flex items-center">
                            <FaDatabase className="text-gray-500" />
                            <span className="mx-3">Master Data</span>
                        </div>
                        <FaAngleDown
                            className={`transform ${openMenus.masterData ? "rotate-180" : ""
                                }`}
                        />
                    </button>

                    {openMenus.masterData && (
                        <div className="pl-12 pr-6 py-2 bg-gray-50">
                            <Link
                                to="/master-data/items"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Daftar Item
                            </Link>
                            <Link
                                to="/master-data/categories"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Kategori Item
                            </Link>
                            <Link
                                to="/master-data/types"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Jenis Item
                            </Link>
                            <Link
                                to="/master-data/units"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Satuan
                            </Link>
                            <Link
                                to="/master-data/suppliers"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Supplier
                            </Link>
                            <Link
                                to="/master-data/patients"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Pasien
                            </Link>
                            <Link
                                to="/master-data/doctors"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Dokter
                            </Link>
                        </div>
                    )}
                </div>

                {/* Persediaan */}
                <div>
                    <button
                        onClick={() => toggleMenu("inventory")}
                        className="flex items-center justify-between w-full px-6 py-3 text-gray-700 hover:bg-gray-100"
                    >
                        <div className="flex items-center">
                            <FaBoxes className="text-gray-500" />
                            <span className="mx-3">Persediaan</span>
                        </div>
                        <FaAngleDown
                            className={`transform ${openMenus.inventory ? "rotate-180" : ""}`}
                        />
                    </button>

                    {openMenus.inventory && (
                        <div className="pl-12 pr-6 py-2 bg-gray-50">
                            <Link
                                to="/inventory/stock"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Stok Obat
                            </Link>
                            <Link
                                to="/inventory/stock-opname"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Stok Opname
                            </Link>
                            <Link
                                to="/inventory/expired"
                                className="block py-2 text-sm text-gray-600 hover:text-primary"
                            >
                                Obat Kadaluarsa
                            </Link>
                        </div>
                    )}
                </div>

                {/* Tambahkan menu lain (Pembelian, Penjualan, Klinik, dll) dengan struktur yang sama */}
            </nav>
        </aside>
    );
};

export default Sidebar;


===============================================
= File: ./src/hooks/useAddItemForm.ts 
===============================================

import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import { supabase } from "../lib/supabase";
import { useUnitConversion } from "./useUnitConversion";

interface Category {
    id: string;
    name: string;
}

interface MedicineType {
    id: string;
    name: string;
}

interface Unit {
    id: string;
    name: string;
}

interface FormData {
    code: string;
    name: string;
    type_id: string;
    category_id: string;
    unit_id: string;
    rack: string;
    description: string;
    base_price: number;
    sell_price: number;
    min_stock: number;
    is_active: boolean;
    is_medicine: boolean;
    has_expiry_date: boolean;
}

// interface UnitConversion {
//     unit: {
//         id: string;
//     };
//     conversion: number;
//     basePrice: number;
// }

export const useAddItemForm = () => {
    const navigate = useNavigate();
    const [loading, setLoading] = useState(false);
    const [saving, setSaving] = useState(false);
    const [categories, setCategories] = useState<Category[]>([]);
    const [types, setTypes] = useState<MedicineType[]>([]);
    const [units, setUnits] = useState<Unit[]>([]);
    // State untuk nilai yang ditampilkan dengan format mata uang
    const [displayBasePrice, setDisplayBasePrice] = useState('');
    const [displaySellPrice, setDisplaySellPrice] = useState('');

    // Hook untuk konversi satuan
    const unitConversionHook = useUnitConversion();

    // Form state
    const [formData, setFormData] = useState<FormData>({
        code: "", // Kode akan dibuat otomatis
        name: "",
        type_id: "",
        category_id: "",
        unit_id: "",
        rack: "",
        description: "",
        base_price: 0,
        sell_price: 0,
        min_stock: 10,
        is_active: true,
        is_medicine: true,
        has_expiry_date: false,
    });

    // Fungsi untuk memperbarui formData secara lebih mudah
    const updateFormData = (newData: Partial<FormData>) => {
        setFormData(prev => ({
            ...prev,
            ...newData
        }));
    };

    // Fungsi helper untuk menghasilkan kode dinamis
    const generateTypeCode = (typeId: string): string => {
        const selectedType = types.find(type => type.id === typeId);
        if (!selectedType) return "X";

        // Gunakan kode khusus untuk setiap jenis obat
        const typeName = selectedType.name.toLowerCase();
        if (typeName.includes("bebas") && !typeName.includes("terbatas")) return "B";
        if (typeName.includes("bebas terbatas")) return "T";
        if (typeName.includes("keras")) return "K";
        if (typeName.includes("narkotika")) return "N";
        if (typeName.includes("fitofarmaka")) return "F";
        if (typeName.includes("herbal")) return "H";
        
        // Fallback ke huruf pertama jika tidak ada yang cocok
        return selectedType.name.charAt(0).toUpperCase();
    };
    
    const generateUnitCode = (unitId: string): string => {
        const selectedUnit = units.find(unit => unit.id === unitId);
        if (!selectedUnit) return "X";

        // Ambil huruf pertama dari nama unit
        return selectedUnit.name.charAt(0).toUpperCase();
    };

    const generateCategoryCode = (categoryId: string): string => {
        const selectedCategory = categories.find(category => category.id === categoryId);
        if (!selectedCategory) return "XX";

        const name = selectedCategory.name;

        // Cek apakah kategori dimulai dengan "Anti"
        if (name.toLowerCase().startsWith("anti")) {
            // Untuk kategori yang dimulai dengan "Anti"
            // Ambil "A" dari "Anti" dan huruf pertama dari kata selanjutnya
            const baseName = name.slice(4); // Hilangkan "Anti" dari awal
            if (baseName.length > 0) {
                return "A" + baseName.charAt(0).toUpperCase();
            }
            return "A";
        } else {
            // Untuk kategori lainnya, ambil 2 huruf pertama
            if (name.length >= 2) {
                return name.substring(0, 2).toUpperCase();
            } else if (name.length === 1) {
                return name.toUpperCase() + "X";
            } else {
                return "XX";
            }
        }
    };

    // Fungsi untuk mengonversi angka ke format mata uang Rupiah
    const formatRupiah = (angka: number): string => {
        return new Intl.NumberFormat('id-ID', {
            style: 'currency',
            currency: 'IDR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(angka);
    };

    useEffect(() => {
        fetchMasterData();
    }, []);

    useEffect(() => {
        const generateItemCode = async () => {
            // Jika tipe, kategori, atau satuan belum dipilih, keluar dari fungsi
            if (!formData.type_id || !formData.category_id || !formData.unit_id)
                return;

            const typeCode = generateTypeCode(formData.type_id);
            const unitCode = generateUnitCode(formData.unit_id);
            const categoryCode = generateCategoryCode(formData.category_id);

            const codePrefix = `${typeCode}${unitCode}${categoryCode}`;

            // Cek database untuk mendapatkan urutan terakhir
            try {
                const { data } = await supabase
                    .from("items")
                    .select("code")
                    .ilike("code", `${codePrefix}%`)
                    .order("code", { ascending: false });

                let sequence = 1; // Default mulai dari 1

                if (data && data.length > 0) {
                    // Ekstrak nomor urut dari kode yang sudah ada
                    const lastSequenceStr = data[0].code.substring(codePrefix.length);
                    const lastSequence = parseInt(lastSequenceStr);

                    if (!isNaN(lastSequence)) {
                        sequence = lastSequence + 1;
                    }
                }

                // Format: membuat kode 2 digit (01, 02, ..., dst)
                const sequenceStr = sequence.toString().padStart(2, "0");
                const generatedCode = `${codePrefix}${sequenceStr}`;

                // Update form
                setFormData(prevFormData => ({
                    ...prevFormData,
                    code: generatedCode,
                }));
            } catch (error) {
                console.error("Error generating item code:", error);
            }
        };

        // Hanya generate code jika data master sudah dimuat dan semua pilihan sudah dipilih
        if (formData.type_id && formData.category_id && formData.unit_id &&
            categories.length > 0 && types.length > 0 && units.length > 0) {
            generateItemCode();
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [formData.type_id, formData.category_id, formData.unit_id, categories, types, units]);

    const fetchMasterData = async () => {
        setLoading(true);
        try {
            // Fetch categories
            const { data: categoriesData } = await supabase
                .from("item_categories")
                .select("id, name")
                .order("name");

            // Fetch types
            const { data: typesData } = await supabase
                .from("item_types")
                .select("id, name")
                .order("name");

            // Fetch units
            const { data: unitsData } = await supabase
                .from("item_units")
                .select("id, name")
                .order("name");

            if (categoriesData) setCategories(categoriesData);
            if (typesData) setTypes(typesData);
            if (unitsData) setUnits(unitsData);
        } catch (error) {
            console.error("Error fetching master data:", error);
        } finally {
            setLoading(false);
        }
    };

    const handleChange = (
        e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {
        const { name, value, type } = e.target as HTMLInputElement;

        if (name === "base_price" || name === "sell_price") {
            // Untuk input harga
            const numericValue = value.replace(/[^\d]/g, '');
            const numericInt = numericValue ? parseInt(numericValue) : 0;

            // Update formData dengan nilai numerik
            setFormData({
                ...formData,
                [name]: numericInt
            });

            // Update display value dengan format Rupiah
            const formattedValue = formatRupiah(numericInt);
            if (name === "base_price") {
                setDisplayBasePrice(formattedValue);
            } else {
                setDisplaySellPrice(formattedValue);
            }
        } else if (type === "checkbox") {
            const { checked } = e.target as HTMLInputElement;
            setFormData({
                ...formData,
                [name]: checked,
            });
        } else if (type === "number") {
            setFormData({
                ...formData,
                [name]: parseFloat(value) || 0,
            });
        } else {
            setFormData({
                ...formData,
                [name]: value,
            });
        }
    };

    // Modifikasi handleChange untuk menjamin pemicu generate kode
    const handleSelectChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        const { name, value } = e.target;
        setFormData(prevFormData => ({
            ...prevFormData,
            [name]: value,
        }));
    };

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        setSaving(true);

        try {
            // Check jika nama obat sudah ada
            const { data: existingMedicine } = await supabase
                .from("items")
                .select("id")
                .eq("name", formData.name);

            if (existingMedicine && existingMedicine.length > 0) {
                alert("Nama obat sudah ada. Silakan gunakan nama lain.");
                setSaving(false);
                return;
            }

            // 1. Insert item utama (dengan satuan dasar)
            const mainItemData = {
                name: formData.name,
                category_id: formData.category_id,
                type_id: formData.type_id,
                unit_id: formData.unit_id,
                base_price: formData.base_price,
                sell_price: formData.sell_price,
                stock: 0, // Default stok awal 0
                min_stock: formData.min_stock,
                description: formData.description || null,
                is_active: formData.is_active,
                rack: formData.rack || null,
                code: formData.code,
                is_medicine: formData.is_medicine,
                base_unit: unitConversionHook.baseUnit,
                has_expiry_date: formData.has_expiry_date,
            };

            const { data: newItem, error: mainError } = await supabase
                .from("items")
                .insert(mainItemData)
                .select("id")
                .single();

            if (mainError) throw mainError;

            // 2. Insert unit conversions ke tabel terpisah
            if (unitConversionHook.conversions.length > 0 && newItem) {
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                const conversionRecords = unitConversionHook.conversions.map((uc: { unit: { id: any; name: any; }; conversion: any; basePrice: any; }) => ({
                    item_id: newItem.id,
                    unit_name: uc.unit.name,
                    conversion_rate: uc.conversion,
                    base_price: uc.basePrice,
                    created_at: new Date()
                }));

                // Insert ke tabel unit_conversions
                const { error: conversionError } = await supabase
                    .from("unit_conversions")
                    .insert(conversionRecords);

                if (conversionError) {
                    console.error("Error saving unit conversions:", conversionError);
                    // Lanjutkan meskipun ada error pada konversi unit
                }
            }

            // Redirect ke halaman daftar obat
            navigate("/master-data/items");
        } catch (error) {
            console.error("Error saving item:", error);
            alert("Gagal menyimpan data item. Silakan coba lagi.");
        } finally {
            setSaving(false);
        }
    };

    return {
        formData,
        displayBasePrice,
        displaySellPrice,
        categories,
        types,
        units,
        loading,
        saving,
        handleChange,
        handleSelectChange,
        handleSubmit,
        unitConversionHook,
        updateFormData
    };
};

===============================================
= File: ./src/hooks/useUnitConversion.ts 
===============================================

import { useState, useEffect, useCallback } from "react";
import { supabase } from "../lib/supabase";

export interface UnitConversion {
    id: string;
    unit: {
        id: string;
        name: string;
    };
    conversion: number;
    basePrice: number;
}

export interface UseUnitConversionReturn {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    conversions: any;
    baseUnit: string;
    setBaseUnit: React.Dispatch<React.SetStateAction<string>>;
    basePrice: number;
    setBasePrice: React.Dispatch<React.SetStateAction<number>>;
    unitConversions: UnitConversion[];
    addUnitConversion: (unitConversion: Omit<UnitConversion, "id" | "basePrice">) => void;
    removeUnitConversion: (id: string) => void;
    unitConversionFormData: {
        unit: string;
        conversion: number;
    };
    setUnitConversionFormData: React.Dispatch<React.SetStateAction<{
        unit: string;
        conversion: number;
    }>>;
    recalculateBasePrices: () => void;
    availableUnits: UnitData[];
}

export interface UnitData {
    id: string;
    name: string;
}

export const useUnitConversion = (): UseUnitConversionReturn => {
    const [baseUnit, setBaseUnit] = useState<string>("");
    const [basePrice, setBasePrice] = useState<number>(0);
    const [unitConversions, setUnitConversions] = useState<UnitConversion[]>([]);
    const [availableUnits, setAvailableUnits] = useState<UnitData[]>([]);

    const [unitConversionFormData, setUnitConversionFormData] = useState({
        unit: "",
        conversion: 0,
    });

    // Fetch available units from database
    useEffect(() => {
        const fetchUnits = async () => {
            const { data } = await supabase
                .from("item_units")
                .select("id, name")
                .order("name");
            
            if (data) {
                setAvailableUnits(data);
            }
        };

        fetchUnits();
    }, []);

    // Fungsi untuk menambah konversi satuan
    const addUnitConversion = useCallback((unitConversion: Omit<UnitConversion, "id" | "basePrice">) => {
        // Hitung harga per unit kecil (misal: per tablet)
        // Jika 1 strip = 10 tablet dan harga strip 50.000,
        // maka harga per tablet = 50.000 / 10 = 5.000
        const calculatedBasePrice = basePrice / unitConversion.conversion;
        
        const newUnitConversion: UnitConversion = {
            ...unitConversion,
            id: Date.now().toString(),
            basePrice: calculatedBasePrice,
        };
        setUnitConversions(prevConversions => [...prevConversions, newUnitConversion]);
    }, [basePrice]);

    // Fungsi untuk menghapus konversi satuan
    const removeUnitConversion = useCallback((id: string) => {
        setUnitConversions(prevConversions => prevConversions.filter(uc => uc.id !== id));
    }, []);

    // Menghitung ulang harga pokok untuk semua konversi berdasarkan harga pokok dasar
    const recalculateBasePrices = useCallback(() => {
        if (basePrice <= 0 || unitConversions.length === 0) return;
        
        setUnitConversions(prevConversions => 
            prevConversions.map(uc => ({
                ...uc,
                basePrice: basePrice > 0 ? (basePrice / uc.conversion) : 0
            }))
        );
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [basePrice]);

    return {
        baseUnit,
        setBaseUnit,
        basePrice,
        setBasePrice,
        conversions: unitConversions,
        unitConversions,
        addUnitConversion,
        removeUnitConversion,
        unitConversionFormData,
        setUnitConversionFormData,
        recalculateBasePrices,
        availableUnits
    };
};

===============================================
= File: ./src/index.css 
===============================================

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  line-height: 1.5;
  /* font-weight: 400; */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  /* font-weight: 500; */
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #1a73e8;
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  color: #213547;
  background-color: #ffffff;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}




===============================================
= File: ./src/pages/master-data/ItemList.tsx 
===============================================

import { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { supabase } from "../../lib/supabase";
import { FaPlus, FaEdit, FaTrash, FaSearch } from "react-icons/fa";
import { Card } from "../../components/ui/Card";
import { Button } from "../../components/ui/Button";
import { Table, TableHead, TableBody, TableRow, TableCell, TableHeader } from "../../components/ui/Table";
import { Pagination } from "../../components/ui/Pagination";
import { Loading } from "../../components/ui/Loading";

interface Item {
    id: string;
    name: string;
    category: { name: string };
    type: { name: string };
    unit: { name: string };
    base_price: number;
    sell_price: number;
    stock: number;
}

const ItemList = () => {
    const [items, setItems] = useState<Item[]>([]);
    const [loading, setLoading] = useState(true);
    const [search, setSearch] = useState("");
    const [debouncedSearch, setDebouncedSearch] = useState("");
    const [currentPage, setCurrentPage] = useState(1);
    const [totalItems, setTotalItems] = useState(0);
    const [itemsPerPage, setItemsPerPage] = useState(10);

    // Efek untuk debounce pencarian
    useEffect(() => {
        const timer = setTimeout(() => {
            setDebouncedSearch(search);
            setCurrentPage(1); // Reset ke halaman pertama saat pencarian berubah
        }, 500);

        return () => clearTimeout(timer);
    }, [search]);

    // Efek untuk mengambil data saat parameter berubah
    useEffect(() => {
        fetchItems(currentPage, debouncedSearch, itemsPerPage);
    }, [currentPage, debouncedSearch, itemsPerPage]);

    const fetchItems = async (page = 1, searchTerm = '', limit = 10) => {
        try {
            setLoading(true);

            // Buat query dasar
            let query = supabase
                .from("items")
                .select(`
                id, 
                name, 
                base_price, 
                sell_price, 
                stock,
                category_id,
                type_id,
                unit_id
                `);

            // Tambahkan pencarian jika ada
            if (searchTerm) {
                query = query.ilike('name', `%${searchTerm}%`);
            }

            // Ambil total jumlah item untuk pagination
            // Membuat query terpisah untuk menghitung total item
            let countQuery = supabase
                .from("items")
                .select('id', { count: 'exact' });

            // Tambahkan pencarian jika ada
            if (searchTerm) {
                countQuery = countQuery.ilike('name', `%${searchTerm}%`);
            }

            const { count, error: countError } = await countQuery;
            if (countError) throw countError;

            // Tambahkan pagination
            const from = (page - 1) * limit;
            const to = from + limit - 1;

            const { data, error } = await query
                .order('name')
                .range(from, to);

            if (error) {
                console.error("Error fetching items:", error);
                throw error;
            }

            // Ambil data referensi
            const { data: categories } = await supabase.from("item_categories").select("id, name");
            const { data: types } = await supabase.from("item_types").select("id, name");
            const { data: units } = await supabase.from("item_units").select("id, name");

            // Gabungkan data
            const completedData = (data || []).map(item => ({
                id: item.id,
                name: item.name,
                base_price: item.base_price,
                sell_price: item.sell_price,
                stock: item.stock,
                category: {
                    name: categories?.find(cat => cat.id === item.category_id)?.name || ""
                },
                type: { name: types?.find(t => t.id === item.type_id)?.name || "" },
                unit: { name: units?.find(u => u.id === item.unit_id)?.name || "" }
            }));

            setTotalItems(count || 0);
            setItems(completedData);
        } catch (error) {
            console.error("Error fetching items:", error);
        } finally {
            setLoading(false);
        }
    };

    const handlePageChange = (newPage: number) => {
        setCurrentPage(newPage);
    };

    const handleItemsPerPageChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        setItemsPerPage(Number(e.target.value));
        setCurrentPage(1); // Reset ke halaman pertama
    };

    const totalPages = Math.ceil(totalItems / itemsPerPage);

    return (
        <Card>
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold text-gray-800">Daftar Item</h1>

                <Link
                    to="/master-data/items/add"
                >
                    <Button variant="primary">
                        <FaPlus className="mr-2" />
                        Tambah Item Baru
                    </Button>
                </Link>
            </div>

            <div className="mb-4 relative">
                <input
                    type="text"
                    placeholder="Cari item..."
                    className="w-full p-3 border rounded-md pl-10"
                    value={search}
                    onChange={(e) => setSearch(e.target.value)}
                />
                <FaSearch className="absolute left-3 top-3.5 text-gray-400" />
            </div>

            {loading ? (
                <Loading />
            ) : (
                <>
                    <Table>
                        <TableHead>
                            <TableRow>
                                <TableHeader>Nama Item</TableHeader>
                                <TableHeader>Kategori</TableHeader>
                                <TableHeader>Jenis</TableHeader>
                                <TableHeader>Satuan</TableHeader>
                                <TableHeader className="text-right">Harga Pokok</TableHeader>
                                <TableHeader className="text-right">Harga Jual</TableHeader>
                                <TableHeader className="text-right">Stok</TableHeader>
                                <TableHeader className="text-center">Aksi</TableHeader>
                            </TableRow>
                        </TableHead>
                        <TableBody>
                            {items.length === 0 ? (
                                <TableRow>
                                    <TableCell
                                        colSpan={8}
                                        className="text-center text-gray-600"
                                    >
                                        {debouncedSearch ? `Tidak ada item dengan nama "${debouncedSearch}"` : "Tidak ada data item yang ditemukan"}
                                    </TableCell>
                                </TableRow>
                            ) : (
                                items.map((item) => (
                                    <TableRow key={item.id}>
                                        <TableCell>{item.name}</TableCell>
                                        <TableCell>{item.category.name}</TableCell>
                                        <TableCell>{item.type.name}</TableCell>
                                        <TableCell>{item.unit.name}</TableCell>
                                        <TableCell className="text-right">
                                            {item.base_price.toLocaleString("id-ID", {
                                                style: "currency",
                                                currency: "IDR",
                                            })}
                                        </TableCell>
                                        <TableCell className="text-right">
                                            {item.sell_price.toLocaleString("id-ID", {
                                                style: "currency",
                                                currency: "IDR",
                                            })}
                                        </TableCell>
                                        <TableCell className="text-right">{item.stock}</TableCell>
                                        <TableCell className="text-center">
                                            <div className="flex justify-center space-x-2">
                                                <Link
                                                    to={`/master-data/items/edit/${item.id}`}
                                                >
                                                    <Button variant="secondary" size="sm">
                                                        <FaEdit />
                                                    </Button>
                                                </Link>
                                                <Button
                                                    variant="danger"
                                                    size="sm"
                                                    onClick={() => handleDelete(item.id)}
                                                >
                                                    <FaTrash />
                                                </Button>
                                            </div>
                                        </TableCell>
                                    </TableRow>
                                ))
                            )}
                        </TableBody>
                    </Table>

                    <Pagination 
                        currentPage={currentPage}
                        totalPages={totalPages}
                        totalItems={totalItems}
                        itemsPerPage={itemsPerPage}
                        itemsCount={items.length}
                        onPageChange={handlePageChange}
                        onItemsPerPageChange={handleItemsPerPageChange}
                    />
                </>
            )}
        </Card>
    );

    async function handleDelete(id: string) {
        if (window.confirm("Apakah Anda yakin ingin menghapus item ini?")) {
            try {
                const { error } = await supabase
                    .from("items")
                    .delete()
                    .eq("id", id);

                if (error) throw error;

                // Refresh data
                fetchItems(currentPage, debouncedSearch, itemsPerPage);
            } catch (error) {
                console.error("Error deleting item:", error);
                alert("Gagal menghapus item. Silakan coba lagi.");
            }
        }
    }
};

export default ItemList;

===============================================
= File: ./src/pages/master-data/AddItem.tsx 
===============================================

import { useNavigate } from "react-router-dom";
import { useEffect } from "react";
import { Card, CardHeader, CardTitle, CardContent, CardFooter } from "../../components/ui/Card";
import { Button } from "../../components/ui/Button";
import { Input } from "../../components/ui/Input";
import { FaSave, FaTimes } from "react-icons/fa";
import { FormSection, FormField } from "../../components/ui/FormComponents";
import { useAddItemForm } from "../../hooks/useAddItemForm";
import UnitConversionManager from "../../components/tools/UnitConversionManager";

// Style constants
const inputClassName = "w-full";
const selectClassName = "bg-white w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent";
const addButtonClassName = "ml-2 bg-green-500 text-white p-2 rounded-md hover:bg-green-600";
const radioGroupClassName = "space-x-6";
const textareaClassName = "w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent";

const AddItem = () => {
    const navigate = useNavigate();

    const {
        formData, displayBasePrice, categories, types, units,
        saving, handleChange, handleSelectChange: originalHandleSelectChange, handleSubmit, updateFormData,
        unitConversionHook
    } = useAddItemForm();

    // Modified handleSelectChange to update baseUnit automatically
    const handleSelectChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        const { name, value } = e.target;
        originalHandleSelectChange(e);
        
        // Set baseUnit automatically when unit_id changes
        if (name === 'unit_id' && value) {
            const selectedUnit = units.find(unit => unit.id === value);
            if (selectedUnit) {
                unitConversionHook.setBaseUnit(selectedUnit.name);
            }
        }
    };

    // Efek untuk memperbarui basePrice pada unitConversionHook saat harga pokok berubah
    useEffect(() => {
        // Perbarui nilai basePrice di unitConversionHook ketika formData.base_price berubah
        if (formData.base_price > 0) {
            unitConversionHook.setBasePrice(formData.base_price);
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [formData.base_price]);

    return (
        <div>
            <Card>
                <CardHeader>
                    <CardTitle>Tambah Data Item Baru</CardTitle>
                </CardHeader>

                <form onSubmit={handleSubmit}>
                    <CardContent className="space-y-6">
                        <FormSection title="Data Umum">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <FormField label="Kode Item">
                                    <Input
                                        name="code"
                                        value={formData.code}
                                        disabled={true}
                                        className={inputClassName}
                                        style={formData.code === "" ? {
                                            background: 'repeating-linear-gradient(45deg, #f0f0f0, #f0f0f0 10px, #e0e0e0 10px, #e0e0e0 20px)'
                                        } : {}}
                                    />
                                </FormField>
                            </div>

                            <FormField label="Nama Item">
                                <Input
                                    name="name"
                                    value={formData.name}
                                    onChange={handleChange}
                                    className={inputClassName}
                                    required
                                />
                            </FormField>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <FormField label="Jenis">
                                    <div className="flex">
                                        {categories.length === 0 && (
                                            <span className="inline-block w-4 h-4 mr-2 border-t-2 border-primary rounded-full animate-spin"></span>
                                        )}
                                        <select
                                            name="type_id" 
                                            value={formData.type_id}
                                            onChange={handleSelectChange}
                                            className={selectClassName}
                                            required
                                        >
                                            <option value="">-- Pilih Jenis --</option>
                                            {types.map((type) => (
                                                <option key={type.id} value={type.id}>
                                                    {type.name}
                                                </option>
                                            ))}
                                        </select>
                                        <button
                                            type="button"
                                            className={addButtonClassName}
                                            onClick={() => navigate("/master-data/types/add")}
                                        >
                                            +
                                        </button>
                                    </div>
                                </FormField>

                                <FormField label="Kategori">
                                    <div className="flex">
                                        <select
                                            name="category_id"
                                            value={formData.category_id}
                                            onChange={handleSelectChange}
                                            className={selectClassName}
                                            required
                                        >
                                            <option value="">-- Pilih Kategori --</option>
                                            {categories.map((category) => (
                                                <option key={category.id} value={category.id}>
                                                    {category.name}
                                                </option>
                                            ))}
                                        </select>
                                        <button
                                            type="button"
                                            className={addButtonClassName}
                                            onClick={() => navigate("/master-data/categories/add")}
                                        >
                                            +
                                        </button>
                                    </div>
                                </FormField>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <FormField label="Satuan">
                                    <div className="flex">
                                        <select
                                            name="unit_id"
                                            value={formData.unit_id}
                                            onChange={handleSelectChange}
                                            className={selectClassName}
                                            required
                                        >
                                            <option value="">-- Pilih Satuan --</option>
                                            {units.map((unit) => (
                                                <option key={unit.id} value={unit.id}>
                                                    {unit.name}
                                                </option>
                                            ))}
                                        </select>
                                        <button
                                            type="button"
                                            className={addButtonClassName}
                                            onClick={() => navigate("/master-data/units/add")}
                                        >
                                            +
                                        </button>
                                    </div>
                                </FormField>

                                <FormField label="Rak">
                                    <Input
                                        name="rack"
                                        value={formData.rack}
                                        onChange={handleChange}
                                        className={inputClassName}
                                    />
                                </FormField>
                            </div>

                            <FormField label="Jenis Produk">
                                <div className={radioGroupClassName}>
                                    <label className="inline-flex items-center">
                                        <input
                                            type="radio"
                                            name="is_medicine"
                                            checked={formData.is_medicine}
                                            onChange={() => updateFormData({ is_medicine: true })}
                                            className="form-radio h-5 w-5 text-primary"
                                        />
                                        <span className="ml-2">Obat</span>
                                    </label>
                                    <label className="inline-flex items-center">
                                        <input
                                            type="radio"
                                            name="is_medicine"
                                            checked={!formData.is_medicine}
                                            onChange={() => updateFormData({ is_medicine: false, has_expiry_date: false })}
                                            className="form-radio h-5 w-5 text-primary"
                                        />
                                        <span className="ml-2">Non-Obat</span>
                                    </label>
                                </div>
                            </FormField>

                            <FormField label="Keterangan">
                                <textarea
                                    name="description"
                                    value={formData.description}
                                    onChange={handleChange}
                                    className={textareaClassName}
                                    rows={3}
                                />
                            </FormField>
                        </FormSection>

                        <FormSection title="Harga Pokok">
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <FormField label="Satuan Dasar">
                                    <Input
                                        type="text"
                                        value={unitConversionHook.baseUnit}
                                        readOnly
                                        className={inputClassName}
                                    />
                                </FormField>
                                
                                <FormField label="Harga Pokok">
                                    <Input
                                        type="text"
                                        name="base_price"
                                        value={displayBasePrice}
                                        placeholder="Rp 0"
                                        onChange={handleChange}
                                        min="0"
                                        className={inputClassName}
                                        required
                                    />
                                </FormField>
                            </div>
                        </FormSection>

                        <UnitConversionManager unitConversionHook={unitConversionHook} />

                        <FormSection title="Pengaturan Tambahan">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <FormField label="Status Jual">
                                    <div className={radioGroupClassName}>
                                        <label className="inline-flex items-center">
                                            <input
                                                type="radio"
                                                name="is_active"
                                                checked={formData.is_active}
                                                onChange={() => updateFormData({ is_active: true })}
                                                className="form-radio h-5 w-5 text-primary"
                                            />
                                            <span className="ml-2">Masih dijual</span>
                                        </label>
                                        <label className="inline-flex items-center">
                                            <input
                                                type="radio"
                                                name="is_active"
                                                checked={!formData.is_active}
                                                onChange={() => updateFormData({ is_active: false })}
                                                className="form-radio h-5 w-5 text-primary"
                                            />
                                            <span className="ml-2">Tidak Dijual</span>
                                        </label>
                                    </div>
                                </FormField>

                                <FormField label="Stok Minimal">
                                    <Input
                                        type="number"
                                        name="min_stock"
                                        value={formData.min_stock}
                                        onChange={handleChange}
                                        className={inputClassName}
                                        required
                                    />
                                </FormField>
                            </div>

                            <div className={formData.is_medicine ? "" : "opacity-50 pointer-events-none"}>
                                <label className="inline-flex items-center">
                                    <input
                                        type="checkbox"
                                        name="has_expiry_date"
                                        checked={formData.has_expiry_date}
                                        disabled={!formData.is_medicine}
                                        onChange={handleChange}
                                        className="form-checkbox h-5 w-5 text-primary"
                                    />
                                    <span className="ml-2">Memiliki Tanggal Kadaluarsa</span>
                                </label>
                                <div className="mt-1 text-sm text-gray-500">
                                    Jika dicentang, obat ini akan menggunakan metode FEFO
                                    (First Expired First Out)
                                </div>
                            </div>
                        </FormSection>
                    </CardContent>

                    <CardFooter className="flex justify-between">
                        <Button
                            type="button"
                            variant="outline"
                            onClick={() => navigate("/master-data/items")}
                        >
                            <div className="flex items-center">
                                <FaTimes className="mr-2" /> <span>Batal</span>
                            </div>
                        </Button>
                        <Button type="submit"
                            disabled={saving}
                            isLoading={saving}
                        >
                            <FaSave className="mr-2" /> Simpan
                        </Button>
                    </CardFooter>
                </form>
            </Card>
        </div>
    );
};

export default AddItem;


===============================================
= File: ./src/pages/master-data/UnitList.tsx 
===============================================

import { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { supabase } from "../../lib/supabase";
import { FaPlus, FaEdit, FaTrash } from "react-icons/fa";
import { Card } from "../../components/ui/Card";
import { Button } from "../../components/ui/Button";
import { Table, TableHead, TableBody, TableRow, TableCell, TableHeader } from "../../components/ui/Table";
import { Loading } from "../../components/ui/Loading";

interface Unit {
    id: string;
    name: string;
    description: string;
}

const UnitList = () => {
    const [units, setUnits] = useState<Unit[]>([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetchUnits();
    }, []);

    const fetchUnits = async () => {
        try {
            setLoading(true);
            
            const { data, error } = await supabase
                .from("item_units")
                .select("*")
                .order("name");
                
            if (error) throw error;
            
            setUnits(data || []);
        } catch (error) {
            console.error("Error fetching units:", error);
        } finally {
            setLoading(false);
        }
    };

    const handleDelete = async (id: string) => {
        if (window.confirm("Apakah Anda yakin ingin menghapus satuan item ini?")) {
            try {
                const { error } = await supabase
                    .from("item_units")
                    .delete()
                    .eq("id", id);
                
                if (error) throw error;
                
                fetchUnits(); // Refresh data after deletion
            } catch (error) {
                console.error("Error deleting unit:", error);
                alert("Gagal menghapus satuan item. Silakan coba lagi.");
            }
        }
    };

    return (
        <Card>
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold text-gray-800">Daftar Satuan Item</h1>
                
                <Link
                    to="/master-data/units/add"
                >
                    <Button variant="primary">
                        <FaPlus className="mr-2" />
                        Tambah Satuan Baru
                    </Button>
                </Link>
            </div>
            
            {loading ? (
                <Loading />
            ) : (
                <Table>
                    <TableHead>
                        <TableRow>
                            <TableHeader>Nama Satuan</TableHeader>
                            {/* <TableHeader>Deskripsi</TableHeader> */}
                            <TableHeader className="text-center">Aksi</TableHeader>
                        </TableRow>
                    </TableHead>
                    <TableBody>
                            {units.length === 0 ? (
                                <TableRow>
                                    <TableCell colSpan={3} className="text-center text-gray-500">
                                        Tidak ada data satuan yang ditemukan
                                    </TableCell>
                                </TableRow>
                            ) : (
                                units.map((unit) => (
                                    <TableRow key={unit.id}>
                                        <TableCell>{unit.name}</TableCell>
                                        {/* <TableCell>{unit.description}</TableCell> */}
                                        <TableCell className="text-center">
                                            <div className="flex justify-center space-x-2">
                                                <Link
                                                    to={`/master-data/units/edit/${unit.id}`}
                                                >
                                                    <Button variant="secondary" size="sm">
                                                        <FaEdit />
                                                    </Button>
                                                </Link>
                                                <Button 
                                                    variant="danger"
                                                    size="sm"
                                                    onClick={() => handleDelete(unit.id)}
                                                >
                                                    <FaTrash />
                                                </Button>
                                            </div>
                                        </TableCell>
                                    </TableRow>
                                ))
                            )}
                    </TableBody>
                </Table>
            )}
        </Card>
    );
};

export default UnitList;

===============================================
= File: ./src/pages/master-data/CategoryList.tsx 
===============================================

import { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { supabase } from "../../lib/supabase";
import { FaPlus, FaEdit, FaTrash } from "react-icons/fa";
import { Card } from "../../components/ui/Card";
import { Button } from "../../components/ui/Button";
import { Table, TableHead, TableBody, TableRow, TableCell, TableHeader } from "../../components/ui/Table";
import { Loading } from "../../components/ui/Loading";

interface Category {
    id: string;
    name: string;
    description: string;
}

const CategoryList = () => {
    const [categories, setCategories] = useState<Category[]>([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetchCategories();
    }, []);

    const fetchCategories = async () => {
        try {
            setLoading(true);
            
            const { data, error } = await supabase
                .from("item_categories")
                .select("*")
                .order("name");
                
            if (error) throw error;
            
            setCategories(data || []);
        } catch (error) {
            console.error("Error fetching categories:", error);
        } finally {
            setLoading(false);
        }
    };

    return (
        <Card>
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold text-gray-800">Daftar Kategori Item</h1>
                
                <Link to="/master-data/categories/add">
                    <Button variant="primary" className="flex items-center">
                        <FaPlus className="mr-2" />
                        Tambah Kategori Baru
                    </Button>
                </Link>
            </div>
            
            {loading ? (
                <Loading />
            ) : (
                <Table>
                    <TableHead>
                        <TableRow>
                            <TableHeader>Nama Kategori</TableHeader>
                            <TableHeader>Deskripsi</TableHeader>
                            <TableHeader className="text-center">Aksi</TableHeader>
                        </TableRow>
                    </TableHead>
                    <TableBody>
                        {categories.length === 0 ? (
                            <TableRow>
                                <TableCell colSpan={3} className="text-center text-gray-500">
                                    Tidak ada data kategori yang ditemukan
                                </TableCell>
                            </TableRow>
                        ) : (
                            categories.map((category) => (
                                <TableRow key={category.id}>
                                    <TableCell>{category.name}</TableCell>
                                    <TableCell>{category.description}</TableCell>
                                    <TableCell className="text-center">
                                        <div className="flex justify-center space-x-2">
                                            <Link
                                                to={`/master-data/categories/edit/${category.id}`}
                                            >
                                                <Button variant="secondary" size="sm">
                                                    <FaEdit />
                                                </Button>
                                            </Link>
                                            <Button 
                                                variant="danger"
                                                size="sm"
                                                onClick={() => handleDelete(category.id)}
                                            >
                                                <FaTrash />
                                            </Button>
                                        </div>
                                    </TableCell>
                                </TableRow>
                            ))
                        )}
                    </TableBody>
                </Table>
            )}
        </Card>
    );
    
    async function handleDelete(id: string) {
        if (window.confirm("Apakah Anda yakin ingin menghapus kategori item ini?")) {
            try {
                const { error } = await supabase
                    .from("item_categories")
                    .delete()
                    .eq("id", id);
                
                if (error) throw error;
                
                fetchCategories(); // Refresh data after deletion
            } catch (error) {
                console.error("Error deleting category:", error);
                alert("Gagal menghapus kategori item. Silakan coba lagi.");
            }
        }
    }
};

export default CategoryList;

===============================================
= File: ./src/pages/master-data/TypeList.tsx 
===============================================

import { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { supabase } from "../../lib/supabase";
import { FaPlus, FaEdit, FaTrash } from "react-icons/fa";
import { Card } from "../../components/ui/Card";
import { Button } from "../../components/ui/Button";
import { Table, TableHead, TableBody, TableRow, TableCell, TableHeader } from "../../components/ui/Table";
import { Loading } from "../../components/ui/Loading";

interface ItemType {
    id: string;
    name: string;
    description: string;
}

const TypeList = () => {
    const [types, setTypes] = useState<ItemType[]>([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetchTypes();
    }, []);

    const fetchTypes = async () => {
        try {
            setLoading(true);
            
            const { data, error } = await supabase
                .from("item_types")
                .select("*")
                .order("name");
                
            if (error) throw error;
            
            setTypes(data || []);
        } catch (error) {
            console.error("Error fetching item types:", error);
        } finally {
            setLoading(false);
        }
    };

    return (
        <Card>
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold text-gray-800">Daftar Jenis Item</h1>
                
                <Link
                    to="/master-data/types/add"
                >
                    <Button variant="primary">
                        <FaPlus className="mr-2" />
                        Tambah Jenis Item Baru
                    </Button>
                </Link>
            </div>
            
            {loading ? (
                <Loading />
            ) : (
                <Table>
                    <TableHead>
                        <TableRow>
                            <TableHeader>Nama Jenis</TableHeader>
                            <TableHeader>Deskripsi</TableHeader>
                            <TableHeader className="text-center">Aksi</TableHeader>
                        </TableRow>
                    </TableHead>
                    <TableBody>
                            {types.length === 0 ? (
                                <TableRow>
                                    <TableCell colSpan={3} className="text-center text-gray-500">
                                        Tidak ada data jenis item yang ditemukan
                                    </TableCell>
                                </TableRow>
                            ) : (
                                types.map((type) => (
                                    <TableRow key={type.id}>
                                        <TableCell>{type.name}</TableCell>
                                        <TableCell>{type.description}</TableCell>
                                        <TableCell className="text-center">
                                            <div className="flex justify-center space-x-2">
                                                <Link
                                                    to={`/master-data/types/edit/${type.id}`}
                                                >
                                                    <Button variant="secondary" size="sm">
                                                        <FaEdit />
                                                    </Button>
                                                </Link>
                                                <Button 
                                                    variant="danger"
                                                    size="sm"
                                                    onClick={() => handleDelete(type.id)}
                                                >
                                                    <FaTrash />
                                                </Button>
                                            </div>
                                        </TableCell>
                                    </TableRow>
                                ))
                            )}
                    </TableBody>
                </Table>
            )}
        </Card>
    );
    
    async function handleDelete(id: string) {
        if (window.confirm("Apakah Anda yakin ingin menghapus jenis item ini?")) {
            try {
                const { error } = await supabase
                    .from("item_types")
                    .delete()
                    .eq("id", id);
                
                if (error) throw error;
                
                fetchTypes(); // Refresh data after deletion
            } catch (error) {
                console.error("Error deleting item type:", error);
                alert("Gagal menghapus jenis item. Silakan coba lagi.");
            }
        }
    }
};

export default TypeList;


===============================================
= File: ./src/pages/dashboard/Dashboard.tsx 
===============================================

import { useEffect, useState, useCallback } from 'react';
import { supabase } from '../../lib/supabase';
import {
    Chart as ChartJS,
    CategoryScale,
    LinearScale,
    PointElement,
    LineElement,
    BarElement,
    Title,
    Tooltip,
    Legend,
    ArcElement
} from 'chart.js';
import { Line, Pie, Bar, Doughnut } from 'react-chartjs-2';
import { FaShoppingBag, FaShoppingCart, FaBoxes, FaExclamationTriangle } from 'react-icons/fa';

ChartJS.register(
    CategoryScale,
    LinearScale,
    PointElement,
    LineElement,
    BarElement,
    Title,
    Tooltip,
    Legend,
    ArcElement
);

const Dashboard = () => {
    const [demoMode, setDemoMode] = useState(false);
    const [stats, setStats] = useState({
        totalSales: 0,
        totalPurchases: 0,
        totalMedicines: 0,
        lowStockCount: 0
    });

    const [salesData, setSalesData] = useState<{
        labels: string[];
        datasets: {
            label: string;
            data: number[];
            borderColor: string;
            backgroundColor: string;
        }[];
    }>({
        labels: [],
        datasets: []
    });

    const [topMedicines, setTopMedicines] = useState<{
        labels: string[];
        datasets: {
            label: string;
            data: number[];
            backgroundColor: string[];
            borderColor: string[];
            borderWidth: number;
        }[];
    }>({
        labels: [],
        datasets: []
    });

    useEffect(() => {
        if (!demoMode) {
            fetchStats();
            fetchSalesData();
            fetchTopMedicines();
        }
    }, []);

    const fetchStats = async () => {
        // Get total sales
        const { data: salesData } = await supabase
            .from('sales')
            .select('total');

        const totalSales = salesData
            ? salesData.reduce((sum, sale) => sum + sale.total, 0)
            : 0;

        // Get total purchases
        const { data: purchasesData } = await supabase
            .from('purchases')
            .select('total');

        const totalPurchases = purchasesData
            ? purchasesData.reduce((sum, purchase) => sum + purchase.total, 0)
            : 0;

        // Get total medicines
        const { count: totalMedicines } = await supabase
            .from('medicines')
            .select('*', { count: 'exact' });

        // Get low stock count
        const { count: lowStockCount } = await supabase
            .from('medicines')
            .select('*', { count: 'exact' })
            .lt('stock', 10);

        setStats({
            totalSales,
            totalPurchases,
            totalMedicines: totalMedicines || 0,
            lowStockCount: lowStockCount || 0
        });
    };

    const fetchSalesData = async () => {
        // Get sales data for the last 7 days
        const now = new Date();
        const sevenDaysAgo = new Date(now.setDate(now.getDate() - 6));
        sevenDaysAgo.setHours(0, 0, 0, 0);

        const { data } = await supabase
            .from('sales')
            .select('date, total')
            .gte('date', sevenDaysAgo.toISOString())
            .order('date');

        if (!data) return;

        // Group by date
        const salesByDate = data.reduce<Record<string, number>>((acc, sale) => {
            const date = new Date(sale.date).toLocaleDateString();
            if (!acc[date]) acc[date] = 0;
            acc[date] += sale.total;
            return acc;
        }, {});

        // Generate data for the last 7 days
        const labels = [];
        const values = [];

        for (let i = 0; i < 7; i++) {
            const date = new Date();
            date.setDate(date.getDate() - (6 - i));
            const dateStr = date.toLocaleDateString();
            labels.push(dateStr);
            values.push(salesByDate[dateStr] || 0);
        }

        setSalesData({
            labels,
            datasets: [
                {
                    label: 'Penjualan Harian',
                    data: values,
                    borderColor: 'rgb(53, 162, 235)',
                    backgroundColor: 'rgba(53, 162, 235, 0.5)',
                }
            ]
        });
    };

    const fetchTopMedicines = async () => {
        // Get top 5 selling medicines
        const { data } = await supabase
            .rpc('get_top_selling_medicines', { limit_count: 5 });

        if (!data) return;

        interface TopSellingMedicine {
            name: string;
            total_quantity: number;
        }

        setTopMedicines({
            labels: data.map((item: TopSellingMedicine) => item.name),
            datasets: [
                {
                    label: 'Obat Terlaris',
                    data: data.map((item: TopSellingMedicine) => item.total_quantity),
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.6)',
                        'rgba(54, 162, 235, 0.6)',
                        'rgba(255, 206, 86, 0.6)',
                        'rgba(75, 192, 192, 0.6)',
                        'rgba(153, 102, 255, 0.6)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1,
                }
            ]
        });
    };

    const toggleDemoMode = () => {
        setDemoMode(!demoMode);
    };

    return (
        <div className="min-h-screen">
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold text-gray-800">Dashboard</h1>
                <button 
                    onClick={toggleDemoMode}
                    className={`px-4 py-2 rounded-md font-medium shadow-md border ${demoMode ? 'bg-red-500 text-white border-red-600' : 'bg-blue-500 text-white border-blue-600 hover:bg-blue-700'}`}
                >
                    {demoMode ? 'Disable Demo Mode' : 'Demo Mode'}
                </button>
            </div>

            {demoMode ? (
                <ModernDashboard />
            ) : (
                <RegularDashboard 
                    stats={stats} 
                    salesData={salesData} 
                    topMedicines={topMedicines} 
                />
            )}
        </div>
    );
};

// Komponen untuk dashboard regular (asli)
const RegularDashboard = ({ stats, salesData, topMedicines }) => {
    return (
        <div>
            {/* <h1 className="text-2xl font-bold text-gray-800 mb-6">Dashboard</h1> */}

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <div className="bg-white p-6 rounded-lg shadow">
                    <div className="flex items-center">
                        <div className="p-3 rounded-full bg-blue-100 mr-4">
                            <FaShoppingBag className="text-blue-500 text-xl" />
                        </div>
                        <div>
                            <h2 className="text-sm text-gray-500">Total Penjualan</h2>
                            <p className="text-xl font-semibold">
                                {stats.totalSales.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' })}
                            </p>
                        </div>
                    </div>
                </div>

                <div className="bg-white p-6 rounded-lg shadow">
                    <div className="flex items-center">
                        <div className="p-3 rounded-full bg-green-100 mr-4">
                            <FaShoppingCart className="text-green-500 text-xl" />
                        </div>
                        <div>
                            <h2 className="text-sm text-gray-500">Total Pembelian</h2>
                            <p className="text-xl font-semibold">
                                {stats.totalPurchases.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' })}
                            </p>
                        </div>
                    </div>
                </div>

                <div className="bg-white p-6 rounded-lg shadow">
                    <div className="flex items-center">
                        <div className="p-3 rounded-full bg-purple-100 mr-4">
                            <FaBoxes className="text-purple-500 text-xl" />
                        </div>
                        <div>
                            <h2 className="text-sm text-gray-500">Total Obat</h2>
                            <p className="text-xl font-semibold">{stats.totalMedicines}</p>
                        </div>
                    </div>
                </div>

                <div className="bg-white p-6 rounded-lg shadow">
                    <div className="flex items-center">
                        <div className="p-3 rounded-full bg-red-100 mr-4">
                            <FaExclamationTriangle className="text-red-500 text-xl" />
                        </div>
                        <div>
                            <h2 className="text-sm text-gray-500">Stok Menipis</h2>
                            <p className="text-xl font-semibold">{stats.lowStockCount}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div className="bg-white p-6 rounded-lg shadow">
                    <h2 className="text-lg font-semibold mb-4">Penjualan 7 Hari Terakhir</h2>
                    <div className="h-64">
                        <Line
                            data={salesData}
                            options={{
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }}
                        />
                    </div>
                </div>

                <div className="bg-white p-6 rounded-lg shadow">
                    <h2 className="text-lg font-semibold mb-4">Obat Terlaris</h2>
                    <div className="h-64">
                        <Pie
                            data={topMedicines}
                            options={{
                                responsive: true,
                                maintainAspectRatio: false
                            }}
                        />
                    </div>
                </div>
            </div>
        </div>
    );
};

// Komponen untuk dashboard modern (mode demo)
const ModernDashboard = () => {
    // Data dummy untuk mode demo
    const demoData = {
        totalCustomer: 120,
        totalSales: 234,
        totalProfit: 456,
        outOfStock: 56,
        
        expiringMedicines: [
            { name: 'Doxycycline', expiryDate: '24 Dec 2021', quantity: 40 },
            { name: 'Abetis', expiryDate: '24 Dec 2021', quantity: 40 },
            { name: 'Disulfit 10ml', expiryDate: '24 Dec 2021', quantity: 40 },
            { name: 'Cerox CV', expiryDate: '24 Dec 2021', quantity: 40 },
            { name: 'Fluciox', expiryDate: '24 Dec 2021', quantity: 40 },
        ],
        
        recentOrders: [
            { medicine: 'Paricol 15mg', batchNo: '78367834', quantity: 40, status: 'Delivered', price: 23.00 },
            { medicine: 'Abetis 20mg', batchNo: '88832433', quantity: 40, status: 'Pending', price: 23.00 },
            { medicine: 'Cerox CV', batchNo: '76767634', quantity: 40, status: 'Cancelled', price: 23.00 },
            { medicine: 'Abetis 20mg', batchNo: '45578866', quantity: 40, status: 'Delivered', price: 23.00 },
            { medicine: 'Cerox CV', batchNo: '76767634', quantity: 40, status: 'Cancelled', price: 23.00 },
        ],
        
        monthlyData: [
            { month: 'Jan', value: 40 },
            { month: 'Feb', value: 35 },
            { month: 'Mar', value: 35 },
            { month: 'Apr', value: 45 },
            { month: 'May', value: 40 },
            { month: 'Jun', value: 50 },
            { month: 'Jul', value: 60 },
            { month: 'Aug', value: 40 },
            { month: 'Sep', value: 45 },
            { month: 'Oct', value: 40 },
            { month: 'Nov', value: 35 },
            { month: 'Dec', value: 30 },
        ],
        
        todayReport: {
            totalEarning: 5098.00,
            purchasePercentage: 65,
            cashReceivedPercentage: 75,
            bankReceivePercentage: 45,
            servicePercentage: 85
        }
    };
    
    // Data untuk Monthly Progress chart
    const monthlyProgressData = {
        labels: demoData.monthlyData.map(item => item.month),
        datasets: [
            {
                label: 'Penjualan Bulanan',
                data: demoData.monthlyData.map(item => item.value),
                backgroundColor: demoData.monthlyData.map(item => 
                    item.month === 'Jul' ? '#1a73e8' : '#4ade80'
                ),
                borderRadius: 6,
                borderSkipped: false,
            }
        ]
    };
    
    // Data untuk Today's Report chart (doughnut chart)
    const todayReportData = {
        labels: ['Pembelian', 'Penerimaan Tunai', 'Penerimaan Bank', 'Layanan'],
        datasets: [
            {
                data: [
                    demoData.todayReport.purchasePercentage,
                    demoData.todayReport.cashReceivedPercentage,
                    demoData.todayReport.bankReceivePercentage,
                    demoData.todayReport.servicePercentage
                ],
                backgroundColor: [
                    '#3b82f6',
                    '#f43f5e',
                    '#f97316',
                    '#4ade80'
                ],
                borderWidth: 0,
                cutout: '55%'
            }
        ]
    };

    return (
        <div className="bg-gray-50 p-6 rounded-xl">
            {/* Cards Row */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                {/* Total Customer Card */}
                <div className="bg-white p-4 rounded-xl shadow-sm flex items-start justify-between">
                    <div>
                        <p className="text-sm text-gray-500 mb-1">Total Customer</p>
                        <p className="text-2xl font-bold">{demoData.totalCustomer}</p>
                        <button className="text-xs text-primary mt-2">Lihat Detail</button>
                    </div>
                    <div className="h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center">
                        <span className="text-indigo-500">👥</span>
                    </div>
                </div>
                
                {/* Total Sale Card */}
                <div className="bg-white p-4 rounded-xl shadow-sm flex items-start justify-between">
                    <div>
                        <p className="text-sm text-gray-500 mb-1">Total Sale</p>
                        <p className="text-2xl font-bold">{demoData.totalSales}</p>
                        <button className="text-xs text-primary mt-2">Lihat Detail</button>
                    </div>
                    <div className="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                        <span className="text-green-500">🛒</span>
                    </div>
                </div>
                
                {/* Total Profit Card */}
                <div className="bg-white p-4 rounded-xl shadow-sm flex items-start justify-between">
                    <div>
                        <p className="text-sm text-gray-500 mb-1">Total Profit</p>
                        <p className="text-2xl font-bold">${demoData.totalProfit}</p>
                        <button className="text-xs text-primary mt-2">Lihat Detail</button>
                    </div>
                    <div className="h-10 w-10 rounded-full bg-yellow-100 flex items-center justify-center">
                        <span className="text-yellow-500">💰</span>
                    </div>
                </div>
                
                {/* Out of Stock Card */}
                <div className="bg-white p-4 rounded-xl shadow-sm flex items-start justify-between">
                    <div>
                        <p className="text-sm text-gray-500 mb-1">Out of Stock</p>
                        <p className="text-2xl font-bold">{demoData.outOfStock}</p>
                        <button className="text-xs text-primary mt-2">Lihat Detail</button>
                    </div>
                    <div className="h-10 w-10 rounded-full bg-red-100 flex items-center justify-center">
                        <span className="text-red-500">⚠️</span>
                    </div>
                </div>
            </div>
            
            {/* Tables and Charts */}
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                {/* Expiring List */}
                <div className="bg-white p-4 rounded-xl shadow-sm">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-lg font-semibold">Expiring List</h2>
                        <button className="text-xs text-primary">Lihat Semua</button>
                    </div>
                    
                    <div className="overflow-x-auto">
                        <table className="w-full">
                            <thead>
                                <tr className="text-left text-xs text-gray-500">
                                    <th className="pb-2">Medicine name</th>
                                    <th className="pb-2">Expiry Date</th>
                                    <th className="pb-2">Quantity</th>
                                    <th className="pb-2">Chart</th>
                                    <th className="pb-2">Return</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                {demoData.expiringMedicines.map((medicine, index) => (
                                    <tr key={index} className="text-sm">
                                        <td className="py-3">{medicine.name}</td>
                                        <td className="py-3">{medicine.expiryDate}</td>
                                        <td className="py-3">{medicine.quantity}</td>
                                        <td className="py-3">
                                            <div className="h-6 w-10 text-green-500">📈</div>
                                        </td>
                                        <td className="py-3">
                                            <button className="text-gray-400">↩️</button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                {/* Recent Orders */}
                <div className="bg-white p-4 rounded-xl shadow-sm">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-lg font-semibold">Recent Order's</h2>
                        <button className="text-xs text-primary">Lihat Semua</button>
                    </div>
                    
                    <div className="overflow-x-auto">
                        <table className="w-full">
                            <thead>
                                <tr className="text-left text-xs text-gray-500">
                                    <th className="pb-2">Medicine name</th>
                                    <th className="pb-2">Batch No.</th>
                                    <th className="pb-2">Quantity</th>
                                    <th className="pb-2">Status</th>
                                    <th className="pb-2 text-right">Price</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                {demoData.recentOrders.map((order, index) => (
                                    <tr key={index} className="text-sm">
                                        <td className="py-3">{order.medicine}</td>
                                        <td className="py-3">{order.batchNo}</td>
                                        <td className="py-3">{order.quantity}</td>
                                        <td className="py-3">
                                            <span className={`px-2 py-1 rounded-full text-xs 
                                                ${order.status === 'Delivered' ? 'bg-blue-100 text-blue-600' : 
                                                  order.status === 'Pending' ? 'bg-yellow-100 text-yellow-600' : 
                                                  'bg-red-100 text-red-600'}`}>
                                                {order.status}
                                            </span>
                                        </td>
                                        <td className="py-3 text-right">${order.price.toFixed(2)}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            {/* Charts Row */}
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {/* Monthly Progress */}
                <div className="bg-white p-4 rounded-xl shadow-sm">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-lg font-semibold">Monthly Progress</h2>
                        <select className="text-sm border rounded px-2 py-1">
                            <option>Monthly</option>
                            <option>Weekly</option>
                            <option>Daily</option>
                        </select>
                    </div>
                    
                    <div className="h-64">
                        <Bar 
                            data={monthlyProgressData} 
                            options={{
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: false
                                    },
                                    tooltip: {
                                        callbacks: {
                                            title: (context) => {
                                                const label = context[0].label;
                                                if (label === 'Sep') {
                                                    return 'September';
                                                }
                                                return label;
                                            },
                                            label: (context) => {
                                                return `Sales: ${context.parsed.y}`;
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        grid: {
                                            display: false
                                        }
                                    },
                                    x: {
                                        grid: {
                                            display: false
                                        }
                                    }
                                }
                            }}
                        />
                    </div>
                </div>
                
                {/* Today's Report */}
                <div className="bg-white p-4 rounded-xl shadow-sm">
                    <h2 className="text-lg font-semibold mb-4">Today's Report</h2>
                    
                    <div className="flex items-center justify-center">
                        <div className="h-64 w-64 relative flex items-center justify-center">
                            <Doughnut 
                                data={todayReportData}
                                options={{
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    plugins: {
                                        legend: {
                                            display: false
                                        }
                                    }
                                }}
                            />
                            <div className="absolute inset-0 flex flex-col items-center justify-center">
                                <p className="text-sm text-gray-500">Total Earning</p>
                                <p className="text-xl font-bold">${demoData.todayReport.totalEarning.toFixed(2)}</p>
                            </div>
                        </div>
                        <div className="ml-4">
                            <div className="flex items-center mb-2"><span className="w-3 h-3 rounded-full bg-blue-500 mr-2"></span> Total Purchase</div>
                            <div className="flex items-center mb-2"><span className="w-3 h-3 rounded-full bg-red-500 mr-2"></span> Cash Received</div>
                            <div className="flex items-center mb-2"><span className="w-3 h-3 rounded-full bg-orange-500 mr-2"></span> Bank Receive</div>
                            <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-green-500 mr-2"></span> Total Service</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default Dashboard;


===============================================
= File: ./src/pages/auth/Login.tsx 
===============================================

// src/pages/auth/Login.tsx
import { useState } from 'react';
import { Button } from '../../components/ui/Button';
import { Input } from '../../components/ui/Input';
import { useAuthStore } from '../../store/authStore';

const Login = () => {
    const { login, error, loading } = useAuthStore();
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        await login(email, password);
    };

    return (
        <div className="min-h-screen flex items-center justify-center bg-gray-100">
            <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
                <h1 className="text-2xl font-bold text-center text-primary mb-6">Apotek & Klinik Login</h1>
                
                {error && (
                    <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                        {error}
                    </div>
                )}
                
                <form onSubmit={handleSubmit}>
                    <div className="mb-4">
                        <Input 
                            label="Email"
                            type="email"
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            required
                        />
                    </div>
                
                    <Input 
                        label="Password"
                        type="password"
                        className="mb-6"
                        value={password}
                        onChange={(e) => setPassword(e.target.value)}
                        required
                    />
                
                    <Button
                        type="submit"
                        variant="primary"
                        fullWidth
                        isLoading={loading}
                    >
                        Login
                    </Button>
                </form>
            </div>
        </div>
    );
};

export default Login;

===============================================
= File: ./src/pages/sales/CreateSale.tsx 
===============================================

import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { supabase } from '../../lib/supabase';
import { useForm, useFieldArray, Controller } from 'react-hook-form';
import { FaPlus, FaTrash, FaSearch } from 'react-icons/fa';

interface Item {
    id: string;
    name: string;
    sell_price: number;
    stock: number;
}

interface Patient {
    id: string;
    name: string;
}

interface Doctor {
    id: string;
    name: string;
}

interface SaleFormData {
    patient_id: string;
    doctor_id: string;
    payment_method: string;
    items: {
        item_id: string;
        quantity: number;
        price: number;
        subtotal: number;
    }[];
}

const CreateSale = () => {
    const navigate = useNavigate();
    const [items, setItems] = useState<Item[]>([]);
    const [patients, setPatients] = useState<Patient[]>([]);
    const [doctors, setDoctors] = useState<Doctor[]>([]);
    const [loading, setLoading] = useState(false);
    const [searchItem, setSearchItem] = useState('');
    const [selectedItem, setSelectedItem] = useState<Item | null>(null);
    const [showItemDropdown, setShowItemDropdown] = useState(false);

    const { control, handleSubmit, setValue, watch, register, formState: { errors } } = useForm<SaleFormData>({
        defaultValues: {
            patient_id: '',
            doctor_id: '',
            payment_method: 'cash',
            items: []
        }
    });

    const { fields, append, remove } = useFieldArray({
        control,
        name: "items"
    });

    const items = watch('items');
    const total = items.reduce((sum, item) => sum + (item.subtotal || 0), 0);

    useEffect(() => {
        fetchItems();
        fetchPatients();
        fetchDoctors();
    }, []);

    const fetchItems = async () => {
        const { data } = await supabase
            .from('items')
            .select('id, name, sell_price, stock')
            .gt('stock', 0)
            .order('name');

        if (data) setItems(data);
    };

    const fetchPatients = async () => {
        const { data } = await supabase
            .from('patients')
            .select('id, name')
            .order('name');

        if (data) setPatients(data);
    };

    const fetchDoctors = async () => {
        const { data } = await supabase
            .from('doctors')
            .select('id, name')
            .order('name');

        if (data) setDoctors(data);
    };

    const addItem = () => {
        if (!selectedItem) return;

        append({
            item_id: selectedItem.id,
            quantity: 1,
            price: selectedItem.sell_price,
            subtotal: selectedItem.sell_price
        });

        setSelectedItem(null);
        setSearchItem('');
    };

    const updateSubtotal = (index: number, quantity: number, price: number) => {
        setValue(`items.${index}.subtotal`, quantity * price);
    };

    const filteredItems = items.filter(item =>
        item.name.toLowerCase().includes(searchItem.toLowerCase())
    );

    const onSubmit = async (data: SaleFormData) => {
        try {
            setLoading(true);

            // Insert sale record
            const { data: saleData, error: saleError } = await supabase
                .from('sales')
                .insert({
                    patient_id: data.patient_id || null,
                    doctor_id: data.doctor_id || null,
                    date: new Date(),
                    total: total,
                    payment_method: data.payment_method
                })
                .select('id')
                .single();

            if (saleError) throw saleError;

            // Insert sale items
            const saleItems = data.items.map(item => ({
                sale_id: saleData.id,
                item_id: item.item_id,
                quantity: item.quantity,
                price: item.price,
                subtotal: item.subtotal
            }));

            const { error: itemsError } = await supabase
                .from('sale_items')
                .insert(saleItems);

            if (itemsError) throw itemsError;

            // Update medicine stocks
            for (const item of data.items) {
                await supabase
                    .from('items')
                    .update({
                        stock: supabase.rpc('decrement', { x: item.quantity })
                    })
                    .eq('id', item.item_id);
            }

            navigate('/sales');
        } catch (error) {
            console.error('Error creating sale:', error);
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className="bg-white p-6 rounded-lg shadow">
            <h1 className="text-2xl font-bold text-gray-800 mb-6">Buat Penjualan Baru</h1>

            <form onSubmit={handleSubmit(onSubmit)}>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label className="block mb-2 text-gray-700">Pasien (Opsional)</label>
                        <select
                            {...register('patient_id')}
                            className="w-full p-3 border rounded-md"
                        >
                            <option value="">-- Pilih Pasien --</option>
                            {patients.map(patient => (
                                <option key={patient.id} value={patient.id}>{patient.name}</option>
                            ))}
                        </select>
                    </div>

                    <div>
                        <label className="block mb-2 text-gray-700">Dokter (Opsional)</label>
                        <select
                            {...register('doctor_id')}
                            className="w-full p-3 border rounded-md"
                        >
                            <option value="">-- Pilih Dokter --</option>
                            {doctors.map(doctor => (
                                <option key={doctor.id} value={doctor.id}>{doctor.name}</option>
                            ))}
                        </select>
                    </div>

                    <div>
                        <label className="block mb-2 text-gray-700">Metode Pembayaran</label>
                        <select
                            {...register('payment_method')}
                            className="w-full p-3 border rounded-md"
                        >
                            <option value="cash">Tunai</option>
                            <option value="debit">Kartu Debit</option>
                            <option value="credit">Kartu Kredit</option>
                            <option value="insurance">Asuransi</option>
                        </select>
                    </div>
                </div>

                <div className="mb-6">
                    <h2 className="text-xl font-semibold mb-4">Daftar Item</h2>

                    <div className="mb-4">
                        <div className="relative">
                            <input
                                type="text"
                                placeholder="Cari item..."
                                className="w-full p-3 border rounded-md"
                                value={searchItem}
                                onChange={(e) => {
                                    setSearchItem(e.target.value);
                                    setShowItemDropdown(true);
                                }}
                                onFocus={() => setShowItemDropdown(true)}
                            />

                            {showItemDropdown && searchItem && (
                                <div className="absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-y-auto">
                                    {filteredItems.length === 0 ? (
                                        <div className="p-3 text-gray-500">Tidak ada item yang ditemukan</div>
                                    ) : (
                                        filteredItems.map(item => (
                                            <div
                                                key={item.id}
                                                className="p-3 hover:bg-gray-100 cursor-pointer"
                                                onClick={() => {
                                                    setSelectedItem(item);
                                                    setSearchItem(item.name);
                                                    setShowItemDropdown(false);
                                                }}
                                            >
                                                <div>{item.name}</div>
                                                <div className="text-sm text-gray-500">
                                                    Stok: {item.stock} | Harga: {item.sell_price.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' })}
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            )}
                        </div>

                        <div className="mt-2 flex">
                            <button
                                type="button"
                                className="px-4 py-2 bg-primary text-white rounded-md flex items-center disabled:opacity-50"
                                onClick={addItem}
                                disabled={!selectedItem}
                            >
                                <FaPlus className="mr-2" />
                                Tambah Item
                            </button>
                        </div>
                    </div>

                    <div className="overflow-x-auto">
                        <table className="min-w-full bg-white border">
                            <thead className="bg-gray-100">
                                <tr>
                                    <th className="py-3 px-4 text-left">Nama Item</th>
                                    <th className="py-3 px-4 text-right">Harga</th>
                                    <th className="py-3 px-4 text-center">Kuantitas</th>
                                    <th className="py-3 px-4 text-right">Subtotal</th>
                                    <th className="py-3 px-4 text-center">Aksi</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-200">
                                {fields.length === 0 ? (
                                    <tr>
                                        <td colSpan={5} className="py-4 px-4 text-center text-gray-500">
                                            Belum ada item
                                        </td>
                                    </tr>
                                ) : (
                                    fields.map((field, index) => {
                                        const item = items.find(m => m.id === items[index]?.item_id);

                                        return (
                                            <tr key={field.id}>
                                                <td className="py-3 px-4">{item?.name}</td>
                                                <td className="py-3 px-4 text-right">
                                                    <Controller
                                                        control={control}
                                                        name={`items.${index}.price`}
                                                        render={({ field }) => (
                                                            <input
                                                                type="number"
                                                                className="w-32 p-2 border rounded-md text-right"
                                                                {...field}
                                                                onChange={(e) => {
                                                                    const price = parseFloat(e.target.value);
                                                                    field.onChange(price);
                                                                    updateSubtotal(index, items[index]?.quantity || 0, price);
                                                                }}
                                                            />
                                                        )}
                                                    />
                                                </td>
                                                <td className="py-3 px-4 text-center">
                                                    <Controller
                                                        control={control}
                                                        name={`items.${index}.quantity`}
                                                        render={({ field }) => (
                                                            <input
                                                                type="number"
                                                                className="w-20 p-2 border rounded-md text-center"
                                                                min="1"
                                                                max={item?.stock || 1}
                                                                {...field}
                                                                onChange={(e) => {
                                                                    const quantity = parseInt(e.target.value);
                                                                    field.onChange(quantity);
                                                                    updateSubtotal(index, quantity, items[index]?.price || 0);
                                                                }}
                                                            />
                                                        )}
                                                    />
                                                </td>
                                                <td className="py-3 px-4 text-right">
                                                    {items[index]?.subtotal?.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' })}
                                                </td>
                                                <td className="py-3 px-4 text-center">
                                                    <button
                                                        type="button"
                                                        className="p-1.5 bg-red-500 text-white rounded-md hover:bg-red-600"
                                                        onClick={() => remove(index)}
                                                    >
                                                        <FaTrash />
                                                    </button>
                                                </td>
                                            </tr>
                                        );
                                    })
                                )}
                            </tbody>
                            <tfoot className="bg-gray-50 font-semibold">
                                <tr>
                                    <td colSpan={3} className="py-3 px-4 text-right">Total:</td>
                                    <td className="py-3 px-4 text-right">
                                        {total.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' })}
                                    </td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <div className="flex justify-end">
                    <button
                        type="button"
                        className="px-4 py-2 border rounded-md mr-2"
                        onClick={() => navigate('/sales')}
                    >
                        Batal
                    </button>
                    <button
                        type="submit"
                        className="px-4 py-2 bg-primary text-white rounded-md"
                        disabled={loading || fields.length === 0}
                    >
                        {loading ? 'Menyimpan...' : 'Simpan Penjualan'}
                    </button>
                </div>
            </form>
        </div>
    );
};

export default CreateSale;

===============================================
= File: ./src/App.tsx 
===============================================

import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { Suspense, lazy, useEffect } from 'react';
import MainLayout from './components/layout/MainLayout';
import Login from './pages/auth/Login';
import './index.css';
import { useAuthStore } from './store/authStore';

// Lazy load pages
const Dashboard = lazy(() => import('./pages/dashboard/Dashboard'));
const ItemList = lazy(() => import('./pages/master-data/ItemList'));
const CategoryList = lazy(() => import('./pages/master-data/CategoryList'));
const UnitList = lazy(() => import('./pages/master-data/UnitList'));
const TypeList = lazy(() => import('./pages/master-data/TypeList'));
const AddItem = lazy(() => import('./pages/master-data/AddItem'));
// Tambahkan halaman lain sesuai kebutuhan

function App() {
  const { session, initialize } = useAuthStore();
  
  // Inisialisasi auth state saat aplikasi dimuat
  useEffect(() => {
    initialize();
  }, [initialize]);
  

  return (
    <Router>
      <Routes>
        <Route path="/login" element={!session ? <Login /> : <Navigate to="/" />} />
        
        <Route path="/" element={session ? <MainLayout /> : <Navigate to="/login" />}>
          <Route 
            index 
            element={
            <div className="text-gray-800">
              <Suspense fallback={<div>Loading...</div>}>
                <Dashboard />
              </Suspense>
            </div>
          } />
          
          <Route path="master-data">
            <Route path="items" element={
              <Suspense fallback={<div>Loading...</div>}>
                <ItemList />
              </Suspense>
            } />
            <Route path="items/add" element={
              <Suspense fallback={<div>Loading...</div>}>
                <AddItem />
              </Suspense>
            } />
            <Route path="categories" element={
              <Suspense fallback={<div>Loading...</div>}>
                <CategoryList />
              </Suspense>
            } />
            <Route path="types" element={
              <Suspense fallback={<div>Loading...</div>}>
                <TypeList />
              </Suspense>
            } />
            <Route path="units" element={
              <Suspense fallback={<div>Loading...</div>}>
                <UnitList />
              </Suspense>
            } />
            {/* Tambahkan route lain sesuai kebutuhan */}
          </Route>
          
          {/* Tambahkan route untuk modul lain */}
        </Route>
      </Routes>
    </Router>
  );
}

export default App;

===============================================
= File: ./src/vite-env.d.ts 
===============================================

/// <reference types="vite/client" />


===============================================
= File: ./src/lib/supabase.ts 
===============================================

import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL as string
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY as string

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

===============================================
= File: ./src/lib/classNames.ts 
===============================================

export function classNames(...classes: (string | boolean | undefined | null)[]): string {
    return classes.filter(Boolean).join(' ');
}

===============================================
= File: ./src/store/authStore.ts 
===============================================

/* eslint-disable @typescript-eslint/no-explicit-any */
import { create } from 'zustand';
import { Session } from '@supabase/supabase-js';
import { supabase } from '../lib/supabase';

interface AuthState {
    session: Session | null;
    user: any | null;
    loading: boolean;
    error: string | null;
    login: (email: string, password: string) => Promise<void>;
    logout: () => Promise<void>;
    initialize: () => Promise<void>;
}

export const useAuthStore = create<AuthState>((set) => ({
    session: null,
    user: null,
    loading: true,
    error: null,

    initialize: async () => {
        try {
            const { data } = await supabase.auth.getSession();

            if (data.session) {
                const { data: userData } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', data.session.user.id)
                    .single();

                set({
                    session: data.session,
                    user: userData,
                    loading: false
                });
            } else {
                set({ loading: false });
            }
        } catch (error) {
            console.error('Error initializing auth:', error);
            set({ loading: false });
        }
    },

    login: async (email, password) => {
        try {
            set({ loading: true, error: null });

            const { data, error } = await supabase.auth.signInWithPassword({
                email,
                password
            });

            if (error) throw error;

            const { data: userData } = await supabase
                .from('users')
                .select('*')
                .eq('id', data.user?.id)
                .single();

            set({
                session: data.session,
                user: userData,
                loading: false
            });
        } catch (error: any) {
            console.error('Login error:', error);
            set({ error: error.message, loading: false });
        }
    },

    logout: async () => {
        try {
            set({ loading: true });
            await supabase.auth.signOut();
            set({ session: null, user: null, loading: false });
        } catch (error: any) {
            console.error('Logout error:', error);
            set({ error: error.message, loading: false });
        }
    }
}));

===============================================
= File: ./.gitignore 
===============================================

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?


===============================================
= File: ./get-database 
===============================================

#!/bin/bash
# Konfigurasi Supabase
SUPABASE_URL="https://psqmckbtwqphcteymjil.supabase.co"
SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzcW1ja2J0d3FwaGN0ZXltamlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxOTQ2MjAsImV4cCI6MjA1Nzc3MDYyMH0.wvxpldpaoanDk9Wd7wDUeeCuMSVw9e0pxE7_BMt823s"

# Buat direktori output jika belum ada
OUTPUT_DIR="supabase_data"
mkdir -p "$OUTPUT_DIR"

# File output gabungan
OUTPUT_FILE="$OUTPUT_DIR/database_export.txt"
> "$OUTPUT_FILE"

# Daftar tabel yang diketahui (diperbarui sesuai gambar)
TABLES=(
  "doctors"
  "item_categories"
  "item_types"
  "item_units"
  "items"
  "patients"
  "purchase_items"
  "purchases"
  "sale_items"
  "sales"
  "suppliers"
  "unit_conversions"
  "users"
)

# Loop melalui setiap tabel
for TABLE in "${TABLES[@]}"; do
  echo "Mengunduh data tabel: $TABLE"
  
  # Ambil data dari tabel dan simpan ke file JSON
  RESPONSE=$(curl "$SUPABASE_URL/rest/v1/$TABLE?select=*" \
    -H "apikey: $SUPABASE_KEY" \
    -H "Authorization: Bearer $SUPABASE_KEY" \
    -s)
    
  # Simpan ke file JSON individual
  echo "$RESPONSE" | jq . > "$OUTPUT_DIR/$TABLE.json"
  
  # Tambahkan ke file gabungan
  echo "=== DATA TABEL: $TABLE ===" >> "$OUTPUT_FILE"
  echo "$RESPONSE" | jq . >> "$OUTPUT_FILE"
  echo -e "\n\n" >> "$OUTPUT_FILE"
  
  echo "✓ Data $TABLE berhasil diproses"
done

echo "Semua data telah diunduh ke direktori $OUTPUT_DIR"
echo "Ekspor gabungan disimpan di $OUTPUT_FILE"

===============================================
= File: ./vite.config.ts 
===============================================

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})


===============================================
= File: ./tsconfig.node.json 
===============================================

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}


===============================================
= File: ./get-all 
===============================================

#!/bin/bash
echo "$(tree -I "node_modules|.git" -a)" > project_files.txt && find . -type f -not -path "./node_modules/*" -not -path "./.git/*" -not -path "./src/output.css" -not -path "./package-lock.json" -exec bash -c 'echo -e "

===============================================
= File: {} 
===============================================
" >> project_files.txt && cat {} >> project_files.txt' \;


===============================================
= File: ./index.html 
===============================================

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../src/output.css" rel="stylesheet">
    <!-- <title>Vite + React + TS</title> -->
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


===============================================
= File: ./eslint.config.js 
===============================================

import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'

export default tseslint.config(
  { ignores: ['dist'] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
)


===============================================
= File: ./.env 
===============================================

VITE_SUPABASE_URL=https://psqmckbtwqphcteymjil.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzcW1ja2J0d3FwaGN0ZXltamlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxOTQ2MjAsImV4cCI6MjA1Nzc3MDYyMH0.wvxpldpaoanDk9Wd7wDUeeCuMSVw9e0pxE7_BMt823s

===============================================
= File: ./supabase_data/definitions.txt 
===============================================

SQL Definition of doctors

create table public.doctors (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  specialization character varying(100) null,
  license_number character varying(50) null,
  phone character varying(20) null,
  email character varying(100) null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint doctors_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on doctors for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of item_categories

create table public.item_categories (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  description text null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint medicine_categories_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on item_categories for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of item_types

create table public.item_types (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  description text null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint medicine_types_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on item_types for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of item_units

create table public.item_units (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(50) not null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  description text null,
  constraint medicine_units_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on item_units for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of items

create table public.items (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  sell_price numeric(15, 2) not null default 0,
  stock integer not null default 0,
  min_stock integer null default 10,
  description text null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  is_active boolean null default true,
  code character varying null,
  rack character varying null,
  has_expiry_date boolean null default false,
  is_medicine boolean null default true,
  category_id uuid null,
  type_id uuid null,
  unit_id uuid null,
  base_unit text null,
  base_price numeric(15, 2) null default 0,
  unit_conversions jsonb null default '[]'::jsonb,
  constraint medicines_pkey primary key (id),
  constraint medicines_category_id_fkey foreign KEY (category_id) references item_categories (id),
  constraint medicines_type_id_fkey foreign KEY (type_id) references item_types (id),
  constraint medicines_unit_id_fkey foreign KEY (unit_id) references item_units (id),
  constraint check_base_price_not_negative check ((base_price >= (0)::numeric))
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on items for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of patients

create table public.patients (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  gender character varying(10) null,
  birth_date date null,
  address text null,
  phone character varying(20) null,
  email character varying(100) null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint patients_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on patients for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of purchase_items

create table public.purchase_items (
  id uuid not null default extensions.uuid_generate_v4 (),
  purchase_id uuid null,
  medicine_id uuid null,
  quantity integer not null,
  price numeric(15, 2) not null,
  subtotal numeric(15, 2) not null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint purchase_items_pkey primary key (id),
  constraint purchase_items_medicine_id_fkey foreign KEY (medicine_id) references items (id),
  constraint purchase_items_purchase_id_fkey foreign KEY (purchase_id) references purchases (id) on delete CASCADE
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on purchase_items for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of purchases

create table public.purchases (
  id uuid not null default extensions.uuid_generate_v4 (),
  supplier_id uuid null,
  invoice_number character varying(50) null,
  date date not null,
  total numeric(15, 2) not null default 0,
  payment_status character varying(20) null default 'unpaid'::character varying,
  payment_method character varying(20) null,
  notes text null,
  created_by uuid null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint purchases_pkey primary key (id),
  constraint purchases_created_by_fkey foreign KEY (created_by) references users (id),
  constraint purchases_supplier_id_fkey foreign KEY (supplier_id) references suppliers (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on purchases for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of sale_items

create table public.sale_items (
  id uuid not null default extensions.uuid_generate_v4 (),
  sale_id uuid null,
  item_id uuid null,
  quantity integer not null,
  price numeric(15, 2) not null,
  subtotal numeric(15, 2) not null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint sale_items_pkey primary key (id),
  constraint sale_items_medicine_id_fkey foreign KEY (item_id) references items (id),
  constraint sale_items_sale_id_fkey foreign KEY (sale_id) references sales (id) on delete CASCADE
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on sale_items for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of sales

create table public.sales (
  id uuid not null default extensions.uuid_generate_v4 (),
  patient_id uuid null,
  doctor_id uuid null,
  invoice_number character varying(50) null,
  date date not null,
  total numeric(15, 2) not null default 0,
  payment_method character varying(20) null default 'cash'::character varying,
  created_by uuid null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint sales_pkey primary key (id),
  constraint sales_created_by_fkey foreign KEY (created_by) references users (id),
  constraint sales_doctor_id_fkey foreign KEY (doctor_id) references doctors (id),
  constraint sales_patient_id_fkey foreign KEY (patient_id) references patients (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on sales for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of suppliers

create table public.suppliers (
  id uuid not null default extensions.uuid_generate_v4 (),
  name character varying(100) not null,
  address text null,
  phone character varying(20) null,
  email character varying(100) null,
  contact_person character varying(100) null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint suppliers_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on suppliers for EACH row
execute FUNCTION update_updated_at_column ();

==============================================================
SQL Definition of unit_conversions

create table public.unit_conversions (
  id uuid not null default gen_random_uuid (),
  item_id uuid null,
  unit_name text not null,
  conversion_rate numeric not null,
  base_price numeric null default 0,
  created_at timestamp with time zone null default now(),
  constraint unit_conversions_pkey primary key (id),
  constraint unit_conversions_item_id_unit_name_key unique (item_id, unit_name),
  constraint unit_conversions_item_id_fkey foreign KEY (item_id) references items (id) on delete CASCADE
) TABLESPACE pg_default;

==============================================================
SQL Definition of users

create table public.users (
  id uuid not null,
  name character varying(100) not null,
  email character varying(100) not null,
  role character varying(20) not null default 'staff'::character varying,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint users_pkey primary key (id),
  constraint users_email_key unique (email),
  constraint users_id_fkey foreign KEY (id) references auth.users (id)
) TABLESPACE pg_default;

create trigger set_updated_at BEFORE
update on users for EACH row
execute FUNCTION update_updated_at_column ();

===============================================
= File: ./supabase_data/item_types.json 
===============================================

[
  {
    "id": "ccc6e9a8-9f61-43bc-b1a8-a64ad1c8aebd",
    "name": "Obat Bebas",
    "description": "Obat yang dapat dibeli tanpa resep dokter, ditandai dengan lingkaran hijau dengan garis tepi hitam",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "210574b1-5f18-40dc-a041-3cf33b8f3307",
    "name": "Obat Bebas Terbatas",
    "description": "Obat yang dapat dibeli tanpa resep dokter, namun memiliki peringatan khusus",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "6ecd610a-4a35-448c-8eda-662f1c10fa51",
    "name": "Obat Keras",
    "description": "Obat yang hanya dapat dibeli dengan resep dokter, ditandai dengan lingkaran merah dengan garis tepi hitam dan huruf K di tengah",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "1c2068a7-a66c-4a91-820e-354588330ada",
    "name": "Obat Golongan Narkotika",
    "description": "Obat yang termasuk dalam golongan narkotika dan diatur ketat",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "1725d012-3f32-4c70-8856-aeeb6b74ea82",
    "name": "Obat Fitofarmaka",
    "description": "Obat yang berasal dari bahan alam yang telah dibuktikan keamanan dan khasiatnya melalui uji klinis",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "e09561d2-cc62-4a94-a132-4e17d6a02fa2",
    "name": "Obat Herbal Terstandar",
    "description": "Obat tradisional yang telah dibuktikan keamanan dan khasiatnya melalui uji pra-klinis",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  }
]


===============================================
= File: ./supabase_data/patients.json 
===============================================

[]


===============================================
= File: ./supabase_data/users.json 
===============================================

[]


===============================================
= File: ./supabase_data/item_units.json 
===============================================

[
  {
    "id": "28dbe949-54a2-4198-baba-ed162a041cbe",
    "name": "Botol",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "6727b61b-8063-422d-a89a-16b378d5d76d",
    "name": "Tube",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "d7ec80ef-00b0-4b57-8086-d6ad803a68cc",
    "name": "Strip",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "05990da0-faa0-4f5e-92e9-bc1f2ef4defc",
    "name": "Kapsul",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan padat dengan cangkang keras atau lunak"
  },
  {
    "id": "b822686b-f7ec-46d1-8b40-fb69d8bea2f7",
    "name": "Sirup",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dengan kandungan gula atau pemanis"
  },
  {
    "id": "f19ecad4-fec8-4ba9-b987-8f7bfe7f13b8",
    "name": "Suspensi",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dengan partikel padat yang tersuspensi"
  },
  {
    "id": "aebc351d-0608-4643-ac0a-517bfd73aa7a",
    "name": "Emulsi",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair yang terdiri dari dua cairan yang tidak saling bercampur"
  },
  {
    "id": "9d764020-ae97-43c4-ae7e-ae66cb91ff17",
    "name": "Serbuk",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan kering dalam bentuk bubuk"
  },
  {
    "id": "23fd2eb0-16bb-47bb-832e-e201f4c77a57",
    "name": "Salep",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat untuk penggunaan luar"
  },
  {
    "id": "bf752bfc-7a5f-4c0f-8f59-65b8c74e7f92",
    "name": "Krim",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat untuk penggunaan luar"
  },
  {
    "id": "827d5b4f-a057-443f-bf40-8f50bc336857",
    "name": "Gel",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat transparan atau translusen"
  },
  {
    "id": "abc71b3d-55c9-49e8-8730-bb5071d5c835",
    "name": "Suppositoria",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan padat untuk penggunaan rektal"
  },
  {
    "id": "c10825a4-90db-48d5-92f7-e8252e5a28b0",
    "name": "Tetes",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dosis kecil"
  },
  {
    "id": "1713eeb1-8ca9-4302-be6a-1e9ccde39cf1",
    "name": "Ampul",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan steril dalam wadah kaca tertutup"
  },
  {
    "id": "762913e6-f1e0-4765-a685-122015dc8eaa",
    "name": "Vial",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Wadah kaca dengan tutup karet untuk sediaan injeksi"
  },
  {
    "id": "7a50f346-7587-4ad7-9494-3b871e8be246",
    "name": "Inhaler",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Alat untuk menghirup obat dalam bentuk aerosol"
  },
  {
    "id": "71a78582-1700-4fd8-bc21-6045ca671c56",
    "name": "Patch",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan yang ditempelkan ke kulit"
  },
  {
    "id": "cc8e891c-34ac-4afb-944c-258ad244a96f",
    "name": "Tablet",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:33:30.804321+00:00",
    "description": "Sediaan padat berbentuk bulat, oval, atau persegi"
  },
  {
    "id": "243e80e0-917b-4549-b78c-3c1d27e4ccc4",
    "name": "Kaplet",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:34:44.259782+00:00",
    "description": "Tablet yang dibungkus dengan lapisan gula dan berwarna yang berguna dalam menjaga kelembapan serta kontaminasi ketika di lambung."
  }
]


===============================================
= File: ./supabase_data/purchases.json 
===============================================

[]


===============================================
= File: ./supabase_data/items.json 
===============================================

[
  {
    "id": "a0b29cc8-c271-4d63-ad91-cd7d515d09d9",
    "name": "Test Item",
    "sell_price": 10,
    "stock": 100,
    "min_stock": 10,
    "description": "This is a test item.",
    "created_at": "2025-03-31T11:55:27.697158+00:00",
    "updated_at": "2025-03-31T11:55:27.697158+00:00",
    "is_active": true,
    "code": null,
    "rack": null,
    "has_expiry_date": false,
    "is_medicine": true,
    "category_id": null,
    "type_id": null,
    "unit_id": null,
    "base_unit": null,
    "base_price": 0
  }
]


===============================================
= File: ./supabase_data/unit_conversions.json 
===============================================

[]


===============================================
= File: ./supabase_data/sales.json 
===============================================

[]


===============================================
= File: ./supabase_data/suppliers.json 
===============================================

[]


===============================================
= File: ./supabase_data/database_export.txt 
===============================================

=== DATA TABEL: doctors ===
[]



=== DATA TABEL: item_categories ===
[
  {
    "id": "0d1d6848-96b5-448e-a136-3aba8a9bbbca",
    "name": "Antibiotik",
    "description": "Obat untuk membunuh atau menghambat pertumbuhan bakteri",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "a21f33c1-42aa-4171-a826-59a7e00c315d",
    "name": "Antipiretik",
    "description": "Obat untuk menurunkan demam",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "502e0a0c-9a29-4003-b309-979b659b30db",
    "name": "Analgesik",
    "description": "Obat pereda nyeri",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "26e20a27-a34e-424e-9a85-babc2abdc955",
    "name": "Antidiabetes",
    "description": "Obat untuk mengontrol gula darah",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "c0264ffd-cdd0-4c8f-b5c3-36d040005f5a",
    "name": "Antihipertensi",
    "description": "Obat untuk menurunkan tekanan darah",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  }
]



=== DATA TABEL: item_types ===
[
  {
    "id": "ccc6e9a8-9f61-43bc-b1a8-a64ad1c8aebd",
    "name": "Obat Bebas",
    "description": "Obat yang dapat dibeli tanpa resep dokter, ditandai dengan lingkaran hijau dengan garis tepi hitam",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "210574b1-5f18-40dc-a041-3cf33b8f3307",
    "name": "Obat Bebas Terbatas",
    "description": "Obat yang dapat dibeli tanpa resep dokter, namun memiliki peringatan khusus",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "6ecd610a-4a35-448c-8eda-662f1c10fa51",
    "name": "Obat Keras",
    "description": "Obat yang hanya dapat dibeli dengan resep dokter, ditandai dengan lingkaran merah dengan garis tepi hitam dan huruf K di tengah",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "1c2068a7-a66c-4a91-820e-354588330ada",
    "name": "Obat Golongan Narkotika",
    "description": "Obat yang termasuk dalam golongan narkotika dan diatur ketat",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "1725d012-3f32-4c70-8856-aeeb6b74ea82",
    "name": "Obat Fitofarmaka",
    "description": "Obat yang berasal dari bahan alam yang telah dibuktikan keamanan dan khasiatnya melalui uji klinis",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  },
  {
    "id": "e09561d2-cc62-4a94-a132-4e17d6a02fa2",
    "name": "Obat Herbal Terstandar",
    "description": "Obat tradisional yang telah dibuktikan keamanan dan khasiatnya melalui uji pra-klinis",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:29:38.937463+00:00"
  }
]



=== DATA TABEL: item_units ===
[
  {
    "id": "28dbe949-54a2-4198-baba-ed162a041cbe",
    "name": "Botol",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "6727b61b-8063-422d-a89a-16b378d5d76d",
    "name": "Tube",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "d7ec80ef-00b0-4b57-8086-d6ad803a68cc",
    "name": "Strip",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00",
    "description": null
  },
  {
    "id": "05990da0-faa0-4f5e-92e9-bc1f2ef4defc",
    "name": "Kapsul",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan padat dengan cangkang keras atau lunak"
  },
  {
    "id": "b822686b-f7ec-46d1-8b40-fb69d8bea2f7",
    "name": "Sirup",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dengan kandungan gula atau pemanis"
  },
  {
    "id": "f19ecad4-fec8-4ba9-b987-8f7bfe7f13b8",
    "name": "Suspensi",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dengan partikel padat yang tersuspensi"
  },
  {
    "id": "aebc351d-0608-4643-ac0a-517bfd73aa7a",
    "name": "Emulsi",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair yang terdiri dari dua cairan yang tidak saling bercampur"
  },
  {
    "id": "9d764020-ae97-43c4-ae7e-ae66cb91ff17",
    "name": "Serbuk",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan kering dalam bentuk bubuk"
  },
  {
    "id": "23fd2eb0-16bb-47bb-832e-e201f4c77a57",
    "name": "Salep",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat untuk penggunaan luar"
  },
  {
    "id": "bf752bfc-7a5f-4c0f-8f59-65b8c74e7f92",
    "name": "Krim",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat untuk penggunaan luar"
  },
  {
    "id": "827d5b4f-a057-443f-bf40-8f50bc336857",
    "name": "Gel",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan semi-padat transparan atau translusen"
  },
  {
    "id": "abc71b3d-55c9-49e8-8730-bb5071d5c835",
    "name": "Suppositoria",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan padat untuk penggunaan rektal"
  },
  {
    "id": "c10825a4-90db-48d5-92f7-e8252e5a28b0",
    "name": "Tetes",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan cair dosis kecil"
  },
  {
    "id": "1713eeb1-8ca9-4302-be6a-1e9ccde39cf1",
    "name": "Ampul",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan steril dalam wadah kaca tertutup"
  },
  {
    "id": "762913e6-f1e0-4765-a685-122015dc8eaa",
    "name": "Vial",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Wadah kaca dengan tutup karet untuk sediaan injeksi"
  },
  {
    "id": "7a50f346-7587-4ad7-9494-3b871e8be246",
    "name": "Inhaler",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Alat untuk menghirup obat dalam bentuk aerosol"
  },
  {
    "id": "71a78582-1700-4fd8-bc21-6045ca671c56",
    "name": "Patch",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:31:02.468123+00:00",
    "description": "Sediaan yang ditempelkan ke kulit"
  },
  {
    "id": "cc8e891c-34ac-4afb-944c-258ad244a96f",
    "name": "Tablet",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-30T08:33:30.804321+00:00",
    "description": "Sediaan padat berbentuk bulat, oval, atau persegi"
  },
  {
    "id": "243e80e0-917b-4549-b78c-3c1d27e4ccc4",
    "name": "Kaplet",
    "created_at": "2025-03-30T08:29:38.937463+00:00",
    "updated_at": "2025-03-30T08:34:44.259782+00:00",
    "description": "Tablet yang dibungkus dengan lapisan gula dan berwarna yang berguna dalam menjaga kelembapan serta kontaminasi ketika di lambung."
  }
]



=== DATA TABEL: items ===
[
  {
    "id": "a0b29cc8-c271-4d63-ad91-cd7d515d09d9",
    "name": "Test Item",
    "sell_price": 10,
    "stock": 100,
    "min_stock": 10,
    "description": "This is a test item.",
    "created_at": "2025-03-31T11:55:27.697158+00:00",
    "updated_at": "2025-03-31T11:55:27.697158+00:00",
    "is_active": true,
    "code": null,
    "rack": null,
    "has_expiry_date": false,
    "is_medicine": true,
    "category_id": null,
    "type_id": null,
    "unit_id": null,
    "base_unit": null,
    "base_price": 0
  }
]



=== DATA TABEL: patients ===
[]



=== DATA TABEL: purchase_items ===
[]



=== DATA TABEL: purchases ===
[]



=== DATA TABEL: sale_items ===
[]



=== DATA TABEL: sales ===
[]



=== DATA TABEL: suppliers ===
[]



=== DATA TABEL: unit_conversions ===
[]



=== DATA TABEL: users ===
[]





===============================================
= File: ./supabase_data/doctors.json 
===============================================

[]


===============================================
= File: ./supabase_data/sale_items.json 
===============================================

[]


===============================================
= File: ./supabase_data/purchase_items.json 
===============================================

[]


===============================================
= File: ./supabase_data/item_categories.json 
===============================================

[
  {
    "id": "0d1d6848-96b5-448e-a136-3aba8a9bbbca",
    "name": "Antibiotik",
    "description": "Obat untuk membunuh atau menghambat pertumbuhan bakteri",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "a21f33c1-42aa-4171-a826-59a7e00c315d",
    "name": "Antipiretik",
    "description": "Obat untuk menurunkan demam",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "502e0a0c-9a29-4003-b309-979b659b30db",
    "name": "Analgesik",
    "description": "Obat pereda nyeri",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "26e20a27-a34e-424e-9a85-babc2abdc955",
    "name": "Antidiabetes",
    "description": "Obat untuk mengontrol gula darah",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  },
  {
    "id": "c0264ffd-cdd0-4c8f-b5c3-36d040005f5a",
    "name": "Antihipertensi",
    "description": "Obat untuk menurunkan tekanan darah",
    "created_at": "2025-03-26T14:57:20.368076+00:00",
    "updated_at": "2025-03-26T14:57:20.368076+00:00"
  }
]
